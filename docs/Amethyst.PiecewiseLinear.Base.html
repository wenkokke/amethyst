<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Amethyst.PiecewiseLinear.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">--------------------------------------------------------------------------------</a>
<a id="82" class="Comment">-- Amethyst: Neural Network Verification in Agda</a>
<a id="131" class="Comment">--</a>
<a id="134" class="Comment">-- This module contains an implementation of naive linearisation, which</a>
<a id="206" class="Comment">-- approximates non-linear functions using piecewise-linear approximations,</a>
<a id="282" class="Comment">-- i.e., with a sequence of connected line segments.</a>
<a id="335" class="Comment">-- The function `linearise` approximates a function `f : Float →  Float` over</a>
<a id="413" class="Comment">-- an interval `(lower, upper)` using `pieces` line segments:</a>
<a id="475" class="Comment">--</a>
<a id="478" class="Comment">--   1. We compute a step size `step` which divides the interval `(lower,</a>
<a id="552" class="Comment">--      upper)` into `pieces` subintervals of size `step`.</a>
<a id="611" class="Comment">--   2. For each sub-interval `(lowerᵢ, upperᵢ)`, where `upperᵢ` is `lowerᵢ +</a>
<a id="689" class="Comment">--      step`, we pick the line segment `fᵢ(x) = mᵢ * x + bᵢ`, with slope `mᵢ`</a>
<a id="768" class="Comment">--      and y-intercept `bᵢ`, from `(lowerᵢ, f(lowerᵢ))` to `(upperᵢ, f(upperᵢ))`.</a>
<a id="851" class="Comment">--   3. Finally, we connect all line segments `fᵢ`. The result is a piecewise-</a>
<a id="930" class="Comment">--      linear approximation for `f` over the interval `(lower, upper)`.</a>
<a id="1003" class="Comment">--</a>
<a id="1006" class="Comment">-- The number of segments determines the granularity of the approximation,</a>
<a id="1081" class="Comment">-- though the approximations do not necessarily becomes less precise with an</a>
<a id="1158" class="Comment">-- increased number of segments: e.g., for the exponential function and tanh,</a>
<a id="1236" class="Comment">-- we observe that approximations which use an odd number `pieces` outperform</a>
<a id="1314" class="Comment">-- approximations which use `pieces + 1` segments.</a>
<a id="1365" class="Comment">--</a>
<a id="1368" class="Comment">-- Exports:</a>
<a id="1380" class="Comment">--</a>
<a id="1383" class="Comment">--   - LineSegment (slope; intercept)</a>
<a id="1421" class="Comment">--   - LineSegments ([]; _∷_)</a>
<a id="1451" class="Comment">--   - PiecewiseLinearFn ([]; _∷_)</a>
<a id="1486" class="Comment">--   - OutOfBoundsStrategy (constant; nearest; extrapolate)</a>
<a id="1546" class="Comment">--   - linearise</a>
<a id="1563" class="Comment">--</a>
<a id="1566" class="Comment">-- NOTE: The module also exports the following definitions, but these should be</a>
<a id="1646" class="Comment">--       considered &quot;package private&quot;, and should not be relied upon.</a>
<a id="1716" class="Comment">--</a>
<a id="1719" class="Comment">--   - head</a>
<a id="1731" class="Comment">--   - _+[_*_]</a>
<a id="1746" class="Comment">--   - last</a>
<a id="1758" class="Comment">--</a>
<a id="1761" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1842" class="Keyword">module</a> <a id="1849" href="Amethyst.PiecewiseLinear.Base.html" class="Module">Amethyst.PiecewiseLinear.Base</a> <a id="1879" class="Keyword">where</a>

<a id="1886" class="Keyword">open</a> <a id="1891" class="Keyword">import</a> <a id="1898" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="1908" class="Symbol">as</a> <a id="1911" class="Module">Bool</a> <a id="1916" class="Keyword">using</a> <a id="1922" class="Symbol">(</a><a id="1923" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="1927" class="Symbol">;</a> <a id="1929" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="1933" class="Symbol">;</a> <a id="1935" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="1940" class="Symbol">;</a> <a id="1942" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a><a id="1955" class="Symbol">)</a>
<a id="1957" class="Keyword">open</a> <a id="1962" class="Keyword">import</a> <a id="1969" href="Data.Float.html" class="Module">Data.Float</a> <a id="1980" class="Symbol">as</a> <a id="1983" class="Module">Float</a> <a id="1989" class="Keyword">using</a> <a id="1995" class="Symbol">(</a><a id="1996" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="2001" class="Symbol">;</a> <a id="2003" href="Agda.Builtin.Float.html#1336" class="Primitive">_+_</a><a id="2006" class="Symbol">;</a> <a id="2008" href="Agda.Builtin.Float.html#1389" class="Primitive">_-_</a><a id="2011" class="Symbol">;</a> <a id="2013" href="Agda.Builtin.Float.html#1442" class="Primitive">_*_</a><a id="2016" class="Symbol">;</a> <a id="2018" href="Agda.Builtin.Float.html#1495" class="Primitive">_÷_</a><a id="2021" class="Symbol">;</a> <a id="2023" href="Agda.Builtin.Float.html#422" class="Primitive">_≤ᵇ_</a><a id="2027" class="Symbol">)</a>
<a id="2029" class="Keyword">open</a> <a id="2034" class="Keyword">import</a> <a id="2041" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="2050" class="Symbol">as</a> <a id="2053" class="Module">Nat</a> <a id="2057" class="Keyword">using</a> <a id="2063" class="Symbol">(</a><a id="2064" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="2065" class="Symbol">;</a> <a id="2067" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="2070" class="Symbol">;</a> <a id="2072" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="2076" class="Symbol">;</a> <a id="2078" href="Data.Nat.Base.html#2875" class="Function">pred</a><a id="2082" class="Symbol">;</a> <a id="2084" href="Data.Nat.Base.html#2470" class="Function">NonZero</a><a id="2091" class="Symbol">)</a>
<a id="2093" class="Keyword">open</a> <a id="2098" class="Keyword">import</a> <a id="2105" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="2114" class="Symbol">as</a> <a id="2117" class="Module">Vec</a> <a id="2121" class="Keyword">using</a> <a id="2127" class="Symbol">(</a><a id="2128" href="Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="2131" class="Symbol">)</a>

<a id="2134" class="Comment">-- |Repeated addition of floating-point numbers, by recursion on a natural number.</a>
<a id="2217" class="Comment">--</a>
<a id="2220" class="Comment">--  NOTE: The reason this is done by recusion on the natural `z`, instead of by just</a>
<a id="2305" class="Comment">--        evaluating the floating-point expression, is that (at the time of writing)</a>
<a id="2390" class="Comment">--        it&#39;s not possible to prove properties about floating-point arithmetic in</a>
<a id="2473" class="Comment">--        Agda. By recursing on a natural, we can construct exactly the structure</a>
<a id="2555" class="Comment">--        that arises from the LineSegments construction.</a>
<a id="2613" class="Comment">--</a>
<a id="_+[_*_]"></a><a id="2616" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">_+[_*_]</a> <a id="2624" class="Symbol">:</a> <a id="2626" class="Symbol">(</a><a id="2627" href="Amethyst.PiecewiseLinear.Base.html#2627" class="Bound">x</a> <a id="2629" href="Amethyst.PiecewiseLinear.Base.html#2629" class="Bound">y</a> <a id="2631" class="Symbol">:</a> <a id="2633" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="2638" class="Symbol">)</a> <a id="2640" class="Symbol">(</a><a id="2641" href="Amethyst.PiecewiseLinear.Base.html#2641" class="Bound">z</a> <a id="2643" class="Symbol">:</a> <a id="2645" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="2646" class="Symbol">)</a> <a id="2648" class="Symbol">→</a> <a id="2650" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
<a id="2656" href="Amethyst.PiecewiseLinear.Base.html#2656" class="Bound">x</a> <a id="2658" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">+[</a> <a id="2661" href="Amethyst.PiecewiseLinear.Base.html#2661" class="Bound">y</a> <a id="2663" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">*</a> <a id="2665" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>  <a id="2671" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">]</a> <a id="2673" class="Symbol">=</a> <a id="2675" href="Amethyst.PiecewiseLinear.Base.html#2656" class="Bound">x</a>
<a id="2677" href="Amethyst.PiecewiseLinear.Base.html#2677" class="Bound">x</a> <a id="2679" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">+[</a> <a id="2682" href="Amethyst.PiecewiseLinear.Base.html#2682" class="Bound">y</a> <a id="2684" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">*</a> <a id="2686" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2690" href="Amethyst.PiecewiseLinear.Base.html#2690" class="Bound">z</a> <a id="2692" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">]</a> <a id="2694" class="Symbol">=</a> <a id="2696" class="Symbol">(</a><a id="2697" href="Amethyst.PiecewiseLinear.Base.html#2677" class="Bound">x</a> <a id="2699" href="Agda.Builtin.Float.html#1336" class="Primitive Operator">+</a> <a id="2701" href="Amethyst.PiecewiseLinear.Base.html#2682" class="Bound">y</a><a id="2702" class="Symbol">)</a> <a id="2704" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">+[</a> <a id="2707" href="Amethyst.PiecewiseLinear.Base.html#2682" class="Bound">y</a> <a id="2709" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">*</a> <a id="2711" href="Amethyst.PiecewiseLinear.Base.html#2690" class="Bound">z</a> <a id="2713" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">]</a>

<a id="2716" class="Comment">-- |A line segment is defined by a lower and upper bound on the x-values, a slope,</a>
<a id="2799" class="Comment">--  and and intercept.</a>
<a id="2822" class="Keyword">record</a> <a id="LineSegment"></a><a id="2829" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Record">LineSegment</a> <a id="2841" class="Symbol">(</a><a id="2842" href="Amethyst.PiecewiseLinear.Base.html#2842" class="Bound">lower</a> <a id="2848" href="Amethyst.PiecewiseLinear.Base.html#2848" class="Bound">upper</a> <a id="2854" class="Symbol">:</a> <a id="2856" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="2861" class="Symbol">)</a> <a id="2863" class="Symbol">:</a> <a id="2865" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2869" class="Keyword">where</a>
  <a id="2877" class="Keyword">field</a>
    <a id="LineSegment.slope"></a><a id="2887" href="Amethyst.PiecewiseLinear.Base.html#2887" class="Field">slope</a>     <a id="2897" class="Symbol">:</a> <a id="2899" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="LineSegment.intercept"></a><a id="2909" href="Amethyst.PiecewiseLinear.Base.html#2909" class="Field">intercept</a> <a id="2919" class="Symbol">:</a> <a id="2921" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>

<a id="2928" class="Comment">-- |A sequence of contiguous line segments.</a>
<a id="2972" class="Keyword">data</a> <a id="LineSegments"></a><a id="2977" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="2990" class="Symbol">(</a><a id="2991" href="Amethyst.PiecewiseLinear.Base.html#2991" class="Bound">lower</a> <a id="2997" href="Amethyst.PiecewiseLinear.Base.html#2997" class="Bound">step</a> <a id="3002" class="Symbol">:</a> <a id="3004" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="3009" class="Symbol">)</a> <a id="3011" class="Symbol">:</a> <a id="3013" class="Symbol">(</a><a id="3014" href="Amethyst.PiecewiseLinear.Base.html#3014" class="Bound">pieces</a> <a id="3021" class="Symbol">:</a> <a id="3023" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="3024" class="Symbol">)</a> <a id="3026" class="Symbol">→</a> <a id="3028" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3032" class="Keyword">where</a>
  <a id="LineSegments.[]"></a><a id="3040" href="Amethyst.PiecewiseLinear.Base.html#3040" class="InductiveConstructor">[]</a>  <a id="3044" class="Symbol">:</a> <a id="3046" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="3059" href="Amethyst.PiecewiseLinear.Base.html#2991" class="Bound">lower</a> <a id="3065" href="Amethyst.PiecewiseLinear.Base.html#2997" class="Bound">step</a> <a id="3070" class="Number">0</a>
  <a id="LineSegments._∷_"></a><a id="3074" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">_∷_</a> <a id="3078" class="Symbol">:</a> <a id="3080" class="Symbol">∀</a> <a id="3082" class="Symbol">{</a><a id="3083" href="Amethyst.PiecewiseLinear.Base.html#3083" class="Bound">pieces</a> <a id="3090" class="Symbol">:</a> <a id="3092" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="3093" class="Symbol">}</a>
        <a id="3103" class="Symbol">(</a><a id="3104" href="Amethyst.PiecewiseLinear.Base.html#3104" class="Bound">ls</a> <a id="3107" class="Symbol">:</a> <a id="3109" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Record">LineSegment</a> <a id="3121" href="Amethyst.PiecewiseLinear.Base.html#2991" class="Bound">lower</a> <a id="3127" class="Symbol">(</a><a id="3128" href="Amethyst.PiecewiseLinear.Base.html#2991" class="Bound">lower</a> <a id="3134" href="Agda.Builtin.Float.html#1336" class="Primitive Operator">+</a> <a id="3136" href="Amethyst.PiecewiseLinear.Base.html#2997" class="Bound">step</a><a id="3140" class="Symbol">))</a>
      <a id="3149" class="Symbol">→</a> <a id="3151" class="Symbol">(</a><a id="3152" href="Amethyst.PiecewiseLinear.Base.html#3152" class="Bound">pl</a> <a id="3155" class="Symbol">:</a> <a id="3157" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="3170" class="Symbol">(</a><a id="3171" href="Amethyst.PiecewiseLinear.Base.html#2991" class="Bound">lower</a> <a id="3177" href="Agda.Builtin.Float.html#1336" class="Primitive Operator">+</a> <a id="3179" href="Amethyst.PiecewiseLinear.Base.html#2997" class="Bound">step</a><a id="3183" class="Symbol">)</a> <a id="3185" href="Amethyst.PiecewiseLinear.Base.html#2997" class="Bound">step</a> <a id="3190" href="Amethyst.PiecewiseLinear.Base.html#3083" class="Bound">pieces</a><a id="3196" class="Symbol">)</a>
      <a id="3204" class="Symbol">→</a> <a id="3206" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="3219" href="Amethyst.PiecewiseLinear.Base.html#2991" class="Bound">lower</a> <a id="3225" href="Amethyst.PiecewiseLinear.Base.html#2997" class="Bound">step</a> <a id="3230" class="Symbol">(</a><a id="3231" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="3235" href="Amethyst.PiecewiseLinear.Base.html#3083" class="Bound">pieces</a><a id="3241" class="Symbol">)</a>

<a id="3244" class="Comment">-- |Different strategies for handling out of bounds values</a>
<a id="3303" class="Comment">-- How should a piecewise-linear approximation behave outside of the interval?</a>
<a id="3382" class="Comment">-- We have three simple options:</a>
<a id="3415" class="Comment">--</a>
<a id="3418" class="Comment">--   1. `constant`: specify a constant value</a>
<a id="3463" class="Comment">--   2. `extrapolate`: extrapolate the last line segment beyond the interval boundaries.</a>
<a id="3552" class="Comment">--   3. `nearest`: return the value of the nearest point within the extrapolated intervals</a>
<a id="3643" class="Comment">--</a>
<a id="3646" class="Comment">-- The second option is unsound, as it may result in cases where the codomain of</a>
<a id="3727" class="Comment">-- the piecewise-linear approximation is not a subset of the codomain of the</a>
<a id="3804" class="Comment">-- approximated function. For instance, the piecewise-linear approximation of</a>
<a id="3882" class="Comment">-- the exp-function may return values &lt;0 for a sufficiently small input.</a>
<a id="3955" class="Comment">-- However, we have found that it works well in practice. The third option is</a>
<a id="4033" class="Comment">-- sound, albeit a bit crude.</a>
<a id="4063" class="Keyword">data</a> <a id="OutOfBoundsStrategy"></a><a id="4068" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a> <a id="4088" class="Symbol">:</a> <a id="4090" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="4094" class="Keyword">where</a>
  <a id="OutOfBoundsStrategy.constant"></a><a id="4102" href="Amethyst.PiecewiseLinear.Base.html#4102" class="InductiveConstructor">constant</a>      <a id="4116" class="Symbol">:</a> <a id="4118" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a> <a id="4124" class="Symbol">→</a> <a id="4126" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a>
  <a id="OutOfBoundsStrategy.extrapolate"></a><a id="4148" href="Amethyst.PiecewiseLinear.Base.html#4148" class="InductiveConstructor">extrapolate</a>   <a id="4162" class="Symbol">:</a> <a id="4164" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a>
  <a id="OutOfBoundsStrategy.nearestValue"></a><a id="4186" href="Amethyst.PiecewiseLinear.Base.html#4186" class="InductiveConstructor">nearestValue</a>  <a id="4200" class="Symbol">:</a> <a id="4202" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a>

<a id="4223" class="Comment">-- |A piecewise linear function</a>
<a id="4255" class="Keyword">record</a> <a id="PiecewiseLinearFn"></a><a id="4262" href="Amethyst.PiecewiseLinear.Base.html#4262" class="Record">PiecewiseLinearFn</a> <a id="4280" class="Symbol">:</a> <a id="4282" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="4286" class="Keyword">where</a>
  <a id="4294" class="Keyword">field</a>
    <a id="PiecewiseLinearFn.lowerOOBStrat"></a><a id="4304" href="Amethyst.PiecewiseLinear.Base.html#4304" class="Field">lowerOOBStrat</a> <a id="4318" class="Symbol">:</a> <a id="4320" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a>
    <a id="4344" class="Symbol">{</a><a id="PiecewiseLinearFn.lower"></a><a id="4345" href="Amethyst.PiecewiseLinear.Base.html#4345" class="Field">lower</a> <a id="PiecewiseLinearFn.step"></a><a id="4351" href="Amethyst.PiecewiseLinear.Base.html#4351" class="Field">step</a><a id="4355" class="Symbol">}</a>  <a id="4358" class="Symbol">:</a> <a id="4360" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="4370" class="Symbol">{</a><a id="PiecewiseLinearFn.pieces"></a><a id="4371" href="Amethyst.PiecewiseLinear.Base.html#4371" class="Field">pieces</a><a id="4377" class="Symbol">}</a>      <a id="4384" class="Symbol">:</a> <a id="4386" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="4392" class="Symbol">.{{</a><a id="PiecewiseLinearFn.pieces≢0"></a><a id="4395" href="Amethyst.PiecewiseLinear.Base.html#4395" class="Field">pieces≢0</a><a id="4403" class="Symbol">}}</a> <a id="4406" class="Symbol">:</a> <a id="4408" href="Data.Nat.Base.html#2470" class="Function">NonZero</a> <a id="4416" href="Amethyst.PiecewiseLinear.Base.html#4371" class="Field">pieces</a>
    <a id="PiecewiseLinearFn.lineSegments"></a><a id="4427" href="Amethyst.PiecewiseLinear.Base.html#4427" class="Field">lineSegments</a>  <a id="4441" class="Symbol">:</a> <a id="4443" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="4456" href="Amethyst.PiecewiseLinear.Base.html#4345" class="Field">lower</a> <a id="4462" href="Amethyst.PiecewiseLinear.Base.html#4351" class="Field">step</a> <a id="4467" href="Amethyst.PiecewiseLinear.Base.html#4371" class="Field">pieces</a>
    <a id="PiecewiseLinearFn.upperOOBStrat"></a><a id="4478" href="Amethyst.PiecewiseLinear.Base.html#4478" class="Field">upperOOBStrat</a> <a id="4492" class="Symbol">:</a> <a id="4494" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a>
  
  <a id="PiecewiseLinearFn.upper"></a><a id="4519" href="Amethyst.PiecewiseLinear.Base.html#4519" class="Function">upper</a> <a id="4525" class="Symbol">:</a> <a id="4527" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
  <a id="4535" href="Amethyst.PiecewiseLinear.Base.html#4519" class="Function">upper</a> <a id="4541" class="Symbol">=</a> <a id="4543" href="Amethyst.PiecewiseLinear.Base.html#4345" class="Field">lower</a> <a id="4549" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">+[</a> <a id="4552" href="Amethyst.PiecewiseLinear.Base.html#4351" class="Field">step</a> <a id="4557" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">*</a> <a id="4559" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="4563" href="Amethyst.PiecewiseLinear.Base.html#4371" class="Field">pieces</a> <a id="4570" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">]</a>


<a id="4574" class="Keyword">private</a>
  <a id="4584" class="Keyword">variable</a>
    <a id="4597" href="Amethyst.PiecewiseLinear.Base.html#4597" class="Generalizable">pieces</a> <a id="4604" class="Symbol">:</a> <a id="4606" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="4612" href="Amethyst.PiecewiseLinear.Base.html#4612" class="Generalizable">lower</a>  <a id="4619" class="Symbol">:</a> <a id="4621" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="4631" href="Amethyst.PiecewiseLinear.Base.html#4631" class="Generalizable">step</a>   <a id="4638" class="Symbol">:</a> <a id="4640" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="4650" href="Amethyst.PiecewiseLinear.Base.html#4650" class="Generalizable">upper</a>  <a id="4657" class="Symbol">:</a> <a id="4659" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>

<a id="4666" class="Comment">-- |Return the first line segment in a piecewise-linear function.</a>
<a id="first"></a><a id="4732" href="Amethyst.PiecewiseLinear.Base.html#4732" class="Function">first</a> <a id="4738" class="Symbol">:</a> <a id="4740" class="Symbol">.{{</a><a id="4743" href="Data.Nat.Base.html#2470" class="Function">NonZero</a> <a id="4751" href="Amethyst.PiecewiseLinear.Base.html#4597" class="Generalizable">pieces</a><a id="4757" class="Symbol">}}</a> <a id="4760" class="Symbol">→</a> <a id="4762" class="Symbol">(</a><a id="4763" href="Amethyst.PiecewiseLinear.Base.html#4763" class="Bound">pl</a> <a id="4766" class="Symbol">:</a> <a id="4768" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="4781" href="Amethyst.PiecewiseLinear.Base.html#4612" class="Generalizable">lower</a> <a id="4787" href="Amethyst.PiecewiseLinear.Base.html#4631" class="Generalizable">step</a> <a id="4792" href="Amethyst.PiecewiseLinear.Base.html#4597" class="Generalizable">pieces</a><a id="4798" class="Symbol">)</a>
      <a id="4806" class="Symbol">→</a> <a id="4808" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Record">LineSegment</a> <a id="4820" href="Amethyst.PiecewiseLinear.Base.html#4612" class="Generalizable">lower</a> <a id="4826" class="Symbol">(</a><a id="4827" href="Amethyst.PiecewiseLinear.Base.html#4612" class="Generalizable">lower</a> <a id="4833" href="Agda.Builtin.Float.html#1336" class="Primitive Operator">+</a> <a id="4835" href="Amethyst.PiecewiseLinear.Base.html#4631" class="Generalizable">step</a><a id="4839" class="Symbol">)</a>
<a id="4841" href="Amethyst.PiecewiseLinear.Base.html#4732" class="Function">first</a> <a id="4847" class="Symbol">(</a><a id="4848" href="Amethyst.PiecewiseLinear.Base.html#4848" class="Bound">l</a> <a id="4850" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="4852" href="Amethyst.PiecewiseLinear.Base.html#4852" class="Bound">ls</a><a id="4854" class="Symbol">)</a> <a id="4856" class="Symbol">=</a> <a id="4858" href="Amethyst.PiecewiseLinear.Base.html#4848" class="Bound">l</a>

<a id="4861" class="Comment">-- |Return the last line segment in a piecewise-linear function.</a>
<a id="last"></a><a id="4926" href="Amethyst.PiecewiseLinear.Base.html#4926" class="Function">last</a> <a id="4931" class="Symbol">:</a> <a id="4933" class="Symbol">.{{</a><a id="4936" href="Data.Nat.Base.html#2470" class="Function">NonZero</a> <a id="4944" href="Amethyst.PiecewiseLinear.Base.html#4597" class="Generalizable">pieces</a><a id="4950" class="Symbol">}}</a> <a id="4953" class="Symbol">→</a> <a id="4955" class="Symbol">(</a><a id="4956" href="Amethyst.PiecewiseLinear.Base.html#4956" class="Bound">pl</a> <a id="4959" class="Symbol">:</a> <a id="4961" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="4974" href="Amethyst.PiecewiseLinear.Base.html#4612" class="Generalizable">lower</a> <a id="4980" href="Amethyst.PiecewiseLinear.Base.html#4631" class="Generalizable">step</a> <a id="4985" href="Amethyst.PiecewiseLinear.Base.html#4597" class="Generalizable">pieces</a><a id="4991" class="Symbol">)</a>
     <a id="4998" class="Symbol">→</a> <a id="5000" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Record">LineSegment</a> <a id="5012" class="Symbol">(</a><a id="5013" href="Amethyst.PiecewiseLinear.Base.html#4612" class="Generalizable">lower</a> <a id="5019" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">+[</a> <a id="5022" href="Amethyst.PiecewiseLinear.Base.html#4631" class="Generalizable">step</a> <a id="5027" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">*</a> <a id="5029" class="Symbol">(</a><a id="5030" href="Data.Nat.Base.html#2875" class="Function">pred</a> <a id="5035" href="Amethyst.PiecewiseLinear.Base.html#4597" class="Generalizable">pieces</a><a id="5041" class="Symbol">)</a> <a id="5043" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">]</a><a id="5044" class="Symbol">)</a> <a id="5046" class="Symbol">(</a><a id="5047" href="Amethyst.PiecewiseLinear.Base.html#4612" class="Generalizable">lower</a> <a id="5053" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">+[</a> <a id="5056" href="Amethyst.PiecewiseLinear.Base.html#4631" class="Generalizable">step</a> <a id="5061" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">*</a> <a id="5063" href="Amethyst.PiecewiseLinear.Base.html#4597" class="Generalizable">pieces</a> <a id="5070" href="Amethyst.PiecewiseLinear.Base.html#2616" class="Function Operator">]</a><a id="5071" class="Symbol">)</a>
<a id="5073" href="Amethyst.PiecewiseLinear.Base.html#4926" class="Function">last</a> <a id="5078" class="Symbol">(</a><a id="5079" href="Amethyst.PiecewiseLinear.Base.html#5079" class="Bound">l</a> <a id="5081" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="5083" href="Amethyst.PiecewiseLinear.Base.html#3040" class="InductiveConstructor">[]</a><a id="5085" class="Symbol">)</a>         <a id="5095" class="Symbol">=</a> <a id="5097" href="Amethyst.PiecewiseLinear.Base.html#5079" class="Bound">l</a>
<a id="5099" href="Amethyst.PiecewiseLinear.Base.html#4926" class="Function">last</a> <a id="5104" class="Symbol">(_</a> <a id="5107" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="5109" href="Amethyst.PiecewiseLinear.Base.html#5109" class="Bound">ls</a><a id="5111" class="Symbol">@(_</a> <a id="5115" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="5117" class="Symbol">_))</a> <a id="5121" class="Symbol">=</a> <a id="5123" href="Amethyst.PiecewiseLinear.Base.html#4926" class="Function">last</a> <a id="5128" href="Amethyst.PiecewiseLinear.Base.html#5109" class="Bound">ls</a>

<a id="5132" class="Keyword">private</a>
  <a id="5142" class="Comment">-- |Approximate the function f between `lower` and `lower + step` using one line segment.</a>
  <a id="lineSegment"></a><a id="5234" href="Amethyst.PiecewiseLinear.Base.html#5234" class="Function">lineSegment</a> <a id="5246" class="Symbol">:</a> <a id="5248" class="Symbol">(</a><a id="5249" href="Amethyst.PiecewiseLinear.Base.html#5249" class="Bound">f</a> <a id="5251" class="Symbol">:</a> <a id="5253" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a> <a id="5259" class="Symbol">→</a> <a id="5261" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="5266" class="Symbol">)</a> <a id="5268" class="Symbol">(</a><a id="5269" href="Amethyst.PiecewiseLinear.Base.html#5269" class="Bound">lower</a> <a id="5275" href="Amethyst.PiecewiseLinear.Base.html#5275" class="Bound">step</a> <a id="5280" class="Symbol">:</a> <a id="5282" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="5287" class="Symbol">)</a> <a id="5289" class="Symbol">→</a> <a id="5291" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Record">LineSegment</a> <a id="5303" href="Amethyst.PiecewiseLinear.Base.html#5269" class="Bound">lower</a> <a id="5309" class="Symbol">(</a><a id="5310" href="Amethyst.PiecewiseLinear.Base.html#5269" class="Bound">lower</a> <a id="5316" href="Agda.Builtin.Float.html#1336" class="Primitive Operator">+</a> <a id="5318" href="Amethyst.PiecewiseLinear.Base.html#5275" class="Bound">step</a><a id="5322" class="Symbol">)</a>
  <a id="5326" href="Amethyst.PiecewiseLinear.Base.html#5234" class="Function">lineSegment</a> <a id="5338" href="Amethyst.PiecewiseLinear.Base.html#5338" class="Bound">f</a> <a id="5340" href="Amethyst.PiecewiseLinear.Base.html#5340" class="Bound">lower</a> <a id="5346" href="Amethyst.PiecewiseLinear.Base.html#5346" class="Bound">step</a> <a id="5351" class="Symbol">=</a>
    <a id="5357" class="Keyword">let</a> <a id="5361" href="Amethyst.PiecewiseLinear.Base.html#5361" class="Bound">upper</a>     <a id="5371" class="Symbol">=</a> <a id="5373" href="Amethyst.PiecewiseLinear.Base.html#5340" class="Bound">lower</a> <a id="5379" href="Agda.Builtin.Float.html#1336" class="Primitive Operator">+</a> <a id="5381" href="Amethyst.PiecewiseLinear.Base.html#5346" class="Bound">step</a>
        <a id="5394" href="Amethyst.PiecewiseLinear.Base.html#5394" class="Bound">slope</a>     <a id="5404" class="Symbol">=</a> <a id="5406" class="Symbol">(</a><a id="5407" href="Amethyst.PiecewiseLinear.Base.html#5338" class="Bound">f</a> <a id="5409" href="Amethyst.PiecewiseLinear.Base.html#5361" class="Bound">upper</a> <a id="5415" href="Agda.Builtin.Float.html#1389" class="Primitive Operator">-</a> <a id="5417" href="Amethyst.PiecewiseLinear.Base.html#5338" class="Bound">f</a> <a id="5419" href="Amethyst.PiecewiseLinear.Base.html#5340" class="Bound">lower</a><a id="5424" class="Symbol">)</a> <a id="5426" href="Agda.Builtin.Float.html#1495" class="Primitive Operator">÷</a> <a id="5428" class="Symbol">(</a><a id="5429" href="Amethyst.PiecewiseLinear.Base.html#5361" class="Bound">upper</a> <a id="5435" href="Agda.Builtin.Float.html#1389" class="Primitive Operator">-</a> <a id="5437" href="Amethyst.PiecewiseLinear.Base.html#5340" class="Bound">lower</a><a id="5442" class="Symbol">)</a>
        <a id="5452" href="Amethyst.PiecewiseLinear.Base.html#5452" class="Bound">intercept</a> <a id="5462" class="Symbol">=</a> <a id="5464" href="Amethyst.PiecewiseLinear.Base.html#5338" class="Bound">f</a> <a id="5466" href="Amethyst.PiecewiseLinear.Base.html#5340" class="Bound">lower</a> <a id="5472" href="Agda.Builtin.Float.html#1389" class="Primitive Operator">-</a> <a id="5474" class="Symbol">(</a><a id="5475" href="Amethyst.PiecewiseLinear.Base.html#5394" class="Bound">slope</a> <a id="5481" href="Agda.Builtin.Float.html#1442" class="Primitive Operator">*</a> <a id="5483" href="Amethyst.PiecewiseLinear.Base.html#5340" class="Bound">lower</a><a id="5488" class="Symbol">)</a>
    <a id="5494" class="Keyword">in</a> <a id="5497" class="Keyword">record</a> <a id="5504" class="Symbol">{</a> <a id="5506" href="Amethyst.PiecewiseLinear.Base.html#2887" class="Field">slope</a> <a id="5512" class="Symbol">=</a> <a id="5514" href="Amethyst.PiecewiseLinear.Base.html#5394" class="Bound">slope</a> <a id="5520" class="Symbol">;</a> <a id="5522" href="Amethyst.PiecewiseLinear.Base.html#2909" class="Field">intercept</a> <a id="5532" class="Symbol">=</a> <a id="5534" href="Amethyst.PiecewiseLinear.Base.html#5452" class="Bound">intercept</a> <a id="5544" class="Symbol">}</a>

  <a id="5549" class="Comment">-- |Approximate the function f from lower, using line segments of length step.</a>
  <a id="lineSegments"></a><a id="5630" href="Amethyst.PiecewiseLinear.Base.html#5630" class="Function">lineSegments</a> <a id="5643" class="Symbol">:</a> <a id="5645" class="Symbol">(</a><a id="5646" href="Amethyst.PiecewiseLinear.Base.html#5646" class="Bound">f</a> <a id="5648" class="Symbol">:</a> <a id="5650" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a> <a id="5656" class="Symbol">→</a> <a id="5658" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="5663" class="Symbol">)</a> <a id="5665" class="Symbol">(</a><a id="5666" href="Amethyst.PiecewiseLinear.Base.html#5666" class="Bound">lower</a> <a id="5672" href="Amethyst.PiecewiseLinear.Base.html#5672" class="Bound">step</a> <a id="5677" class="Symbol">:</a> <a id="5679" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="5684" class="Symbol">)</a> <a id="5686" class="Symbol">(</a><a id="5687" href="Amethyst.PiecewiseLinear.Base.html#5687" class="Bound">pieces</a> <a id="5694" class="Symbol">:</a> <a id="5696" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="5697" class="Symbol">)</a>
               <a id="5714" class="Symbol">→</a> <a id="5716" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="5729" href="Amethyst.PiecewiseLinear.Base.html#5666" class="Bound">lower</a> <a id="5735" href="Amethyst.PiecewiseLinear.Base.html#5672" class="Bound">step</a> <a id="5740" href="Amethyst.PiecewiseLinear.Base.html#5687" class="Bound">pieces</a>
  <a id="5749" href="Amethyst.PiecewiseLinear.Base.html#5630" class="Function">lineSegments</a> <a id="5762" href="Amethyst.PiecewiseLinear.Base.html#5762" class="Bound">f</a> <a id="5764" href="Amethyst.PiecewiseLinear.Base.html#5764" class="Bound">lower</a> <a id="5770" href="Amethyst.PiecewiseLinear.Base.html#5770" class="Bound">step</a> <a id="5775" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="5780" class="Symbol">=</a> <a id="5782" href="Amethyst.PiecewiseLinear.Base.html#3040" class="InductiveConstructor">[]</a>
  <a id="5787" href="Amethyst.PiecewiseLinear.Base.html#5630" class="Function">lineSegments</a> <a id="5800" href="Amethyst.PiecewiseLinear.Base.html#5800" class="Bound">f</a> <a id="5802" href="Amethyst.PiecewiseLinear.Base.html#5802" class="Bound">lower</a> <a id="5808" href="Amethyst.PiecewiseLinear.Base.html#5808" class="Bound">step</a> <a id="5813" class="Symbol">(</a><a id="5814" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="5818" href="Amethyst.PiecewiseLinear.Base.html#5818" class="Bound">pieces</a><a id="5824" class="Symbol">)</a> <a id="5826" class="Symbol">=</a> <a id="5828" href="Amethyst.PiecewiseLinear.Base.html#5234" class="Function">lineSegment</a> <a id="5840" href="Amethyst.PiecewiseLinear.Base.html#5800" class="Bound">f</a> <a id="5842" href="Amethyst.PiecewiseLinear.Base.html#5802" class="Bound">lower</a> <a id="5848" href="Amethyst.PiecewiseLinear.Base.html#5808" class="Bound">step</a> <a id="5853" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="5855" href="Amethyst.PiecewiseLinear.Base.html#5630" class="Function">lineSegments</a> <a id="5868" href="Amethyst.PiecewiseLinear.Base.html#5800" class="Bound">f</a> <a id="5870" class="Symbol">(</a><a id="5871" href="Amethyst.PiecewiseLinear.Base.html#5802" class="Bound">lower</a> <a id="5877" href="Agda.Builtin.Float.html#1336" class="Primitive Operator">+</a> <a id="5879" href="Amethyst.PiecewiseLinear.Base.html#5808" class="Bound">step</a><a id="5883" class="Symbol">)</a> <a id="5885" href="Amethyst.PiecewiseLinear.Base.html#5808" class="Bound">step</a> <a id="5890" href="Amethyst.PiecewiseLinear.Base.html#5818" class="Bound">pieces</a>

<a id="5898" class="Comment">-- |Approximate the function f between lower and upper using line segments.</a>
<a id="linearise"></a><a id="5974" href="Amethyst.PiecewiseLinear.Base.html#5974" class="Function">linearise</a> <a id="5984" class="Symbol">:</a> <a id="5986" class="Symbol">(</a><a id="5987" href="Amethyst.PiecewiseLinear.Base.html#5987" class="Bound">f</a> <a id="5989" class="Symbol">:</a> <a id="5991" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a> <a id="5997" class="Symbol">→</a> <a id="5999" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="6004" class="Symbol">)</a> <a id="6006" class="Symbol">(</a><a id="6007" href="Amethyst.PiecewiseLinear.Base.html#6007" class="Bound">lower</a> <a id="6013" href="Amethyst.PiecewiseLinear.Base.html#6013" class="Bound">upper</a> <a id="6019" class="Symbol">:</a> <a id="6021" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="6026" class="Symbol">)</a>
            <a id="6040" class="Symbol">(</a><a id="6041" href="Amethyst.PiecewiseLinear.Base.html#6041" class="Bound">pieces</a> <a id="6048" class="Symbol">:</a> <a id="6050" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="6051" class="Symbol">)</a> <a id="6053" class="Symbol">→</a> <a id="6055" class="Symbol">.{{</a><a id="6058" href="Data.Nat.Base.html#2470" class="Function">NonZero</a> <a id="6066" href="Amethyst.PiecewiseLinear.Base.html#6041" class="Bound">pieces</a><a id="6072" class="Symbol">}}</a>
          <a id="6085" class="Symbol">→</a> <a id="6087" class="Symbol">(</a><a id="6088" href="Amethyst.PiecewiseLinear.Base.html#6088" class="Bound">lowerOOB</a> <a id="6097" href="Amethyst.PiecewiseLinear.Base.html#6097" class="Bound">upperOOB</a> <a id="6106" class="Symbol">:</a> <a id="6108" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a><a id="6127" class="Symbol">)</a>
          <a id="6139" class="Symbol">→</a> <a id="6141" href="Amethyst.PiecewiseLinear.Base.html#4262" class="Record">PiecewiseLinearFn</a>
<a id="6159" href="Amethyst.PiecewiseLinear.Base.html#5974" class="Function">linearise</a> <a id="6169" href="Amethyst.PiecewiseLinear.Base.html#6169" class="Bound">f</a> <a id="6171" href="Amethyst.PiecewiseLinear.Base.html#6171" class="Bound">lower</a> <a id="6177" href="Amethyst.PiecewiseLinear.Base.html#6177" class="Bound">upper</a> <a id="6183" href="Amethyst.PiecewiseLinear.Base.html#6183" class="Bound">pieces</a><a id="6189" class="Symbol">@(</a><a id="6191" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="6195" class="Symbol">_)</a> <a id="6198" href="Amethyst.PiecewiseLinear.Base.html#6198" class="Bound">lowerOOB</a> <a id="6207" href="Amethyst.PiecewiseLinear.Base.html#6207" class="Bound">upperOBB</a> <a id="6216" class="Symbol">=</a> <a id="6218" class="Keyword">record</a>
  <a id="6227" class="Symbol">{</a> <a id="6229" href="Amethyst.PiecewiseLinear.Base.html#4304" class="Field">lowerOOBStrat</a> <a id="6243" class="Symbol">=</a> <a id="6245" href="Amethyst.PiecewiseLinear.Base.html#6198" class="Bound">lowerOOB</a>
  <a id="6256" class="Symbol">;</a> <a id="6258" href="Amethyst.PiecewiseLinear.Base.html#4427" class="Field">lineSegments</a>  <a id="6272" class="Symbol">=</a> <a id="6274" href="Amethyst.PiecewiseLinear.Base.html#5630" class="Function">lineSegments</a> <a id="6287" href="Amethyst.PiecewiseLinear.Base.html#6169" class="Bound">f</a> <a id="6289" href="Amethyst.PiecewiseLinear.Base.html#6171" class="Bound">lower</a> <a id="6295" class="Symbol">((</a><a id="6297" href="Amethyst.PiecewiseLinear.Base.html#6177" class="Bound">upper</a> <a id="6303" href="Agda.Builtin.Float.html#1389" class="Primitive Operator">-</a> <a id="6305" href="Amethyst.PiecewiseLinear.Base.html#6171" class="Bound">lower</a><a id="6310" class="Symbol">)</a> <a id="6312" href="Agda.Builtin.Float.html#1495" class="Primitive Operator">÷</a> <a id="6314" href="Agda.Builtin.Float.html#817" class="Primitive">Float.fromℕ</a> <a id="6326" href="Amethyst.PiecewiseLinear.Base.html#6183" class="Bound">pieces</a><a id="6332" class="Symbol">)</a> <a id="6334" href="Amethyst.PiecewiseLinear.Base.html#6183" class="Bound">pieces</a>
  <a id="6343" class="Symbol">;</a> <a id="6345" href="Amethyst.PiecewiseLinear.Base.html#4478" class="Field">upperOOBStrat</a> <a id="6359" class="Symbol">=</a> <a id="6361" href="Amethyst.PiecewiseLinear.Base.html#6207" class="Bound">upperOBB</a>
  <a id="6372" class="Symbol">}</a>

</pre></body></html>