<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Amethyst.PiecewiseLinear.As.Schmitty</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-- This module contains functions to reflect piecewise-linear functions to</a>
<a id="76" class="Comment">-- Schmitty terms.</a>
<a id="95" class="Comment">--</a>
<a id="98" class="Comment">-- Exports:</a>
<a id="110" class="Comment">--</a>
<a id="113" class="Comment">--  - reflectExtrap</a>
<a id="133" class="Comment">--  - reflectBounded</a>
<a id="154" class="Comment">--</a>
<a id="157" class="Keyword">module</a> <a id="164" href="Amethyst.PiecewiseLinear.As.Schmitty.html" class="Module">Amethyst.PiecewiseLinear.As.Schmitty</a> <a id="201" class="Keyword">where</a>

<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Amethyst.PiecewiseLinear.html" class="Module">Amethyst.PiecewiseLinear</a> <a id="245" class="Keyword">using</a> <a id="251" class="Symbol">(</a><a id="252" href="Amethyst.PiecewiseLinear.Base.html#885" class="Datatype">PiecewiseLinear</a><a id="267" class="Symbol">;</a> <a id="269" href="Amethyst.PiecewiseLinear.Base.html#951" class="InductiveConstructor">[]</a><a id="271" class="Symbol">;</a> <a id="273" href="Amethyst.PiecewiseLinear.Base.html#988" class="InductiveConstructor Operator">_∷_</a><a id="276" class="Symbol">;</a> <a id="278" href="Amethyst.PiecewiseLinear.Base.html#717" class="Record">LineSegment</a><a id="289" class="Symbol">;</a> <a id="291" href="Amethyst.PiecewiseLinear.Base.html#1207" class="Function">head</a><a id="295" class="Symbol">;</a> <a id="297" href="Amethyst.PiecewiseLinear.Base.html#1805" class="Function Operator">_+[_*_]</a><a id="304" class="Symbol">;</a> <a id="306" href="Amethyst.PiecewiseLinear.Base.html#1970" class="Function">last</a><a id="310" class="Symbol">)</a>
<a id="312" class="Keyword">open</a> <a id="317" class="Keyword">import</a> <a id="324" href="Amethyst.LinearAlgebra.As.Schmitty.html" class="Module">Amethyst.LinearAlgebra.As.Schmitty</a>
<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="381" class="Symbol">as</a> <a id="384" class="Module">Bool</a> <a id="389" class="Keyword">using</a> <a id="395" class="Symbol">(</a><a id="396" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="400" class="Symbol">;</a> <a id="402" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="406" class="Symbol">;</a> <a id="408" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="413" class="Symbol">;</a> <a id="415" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a><a id="428" class="Symbol">)</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Data.Float.html" class="Module">Data.Float</a> <a id="453" class="Symbol">as</a> <a id="456" class="Module">Float</a> <a id="462" class="Keyword">using</a> <a id="468" class="Symbol">(</a><a id="469" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="474" class="Symbol">;</a> <a id="476" href="Agda.Builtin.Float.html#1336" class="Primitive">_+_</a><a id="479" class="Symbol">;</a> <a id="481" href="Agda.Builtin.Float.html#1442" class="Primitive">_*_</a><a id="484" class="Symbol">;</a> <a id="486" href="Agda.Builtin.Float.html#422" class="Primitive">_≤ᵇ_</a><a id="490" class="Symbol">)</a>
<a id="492" class="Keyword">open</a> <a id="497" class="Keyword">import</a> <a id="504" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="513" class="Symbol">as</a> <a id="516" class="Module">Nat</a> <a id="520" class="Keyword">using</a> <a id="526" class="Symbol">(</a><a id="527" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="528" class="Symbol">;</a> <a id="530" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="533" class="Symbol">;</a> <a id="535" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="539" class="Symbol">)</a>
<a id="541" class="Keyword">open</a> <a id="546" class="Keyword">import</a> <a id="553" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="562" class="Symbol">as</a> <a id="565" class="Module">Vec</a> <a id="569" class="Keyword">using</a> <a id="575" class="Symbol">(</a><a id="576" href="Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="579" class="Symbol">)</a>
<a id="581" class="Keyword">open</a> <a id="586" class="Keyword">import</a> <a id="593" href="Function.html" class="Module">Function</a> <a id="602" class="Keyword">using</a> <a id="608" class="Symbol">(</a><a id="609" href="Function.Base.html#1919" class="Function Operator">_$_</a><a id="612" class="Symbol">)</a>

<a id="615" class="Keyword">private</a>
  <a id="625" class="Keyword">variable</a>
    <a id="638" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a>      <a id="645" class="Symbol">:</a> <a id="647" href="SMT.Script.Base.html#1026" class="Function">Ctxt</a>
    <a id="656" href="Amethyst.PiecewiseLinear.As.Schmitty.html#656" class="Generalizable">pieces</a> <a id="663" class="Symbol">:</a> <a id="665" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="671" href="Amethyst.PiecewiseLinear.As.Schmitty.html#671" class="Generalizable">lower</a>  <a id="678" class="Symbol">:</a> <a id="680" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="690" href="Amethyst.PiecewiseLinear.As.Schmitty.html#690" class="Generalizable">step</a>   <a id="697" class="Symbol">:</a> <a id="699" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="709" href="Amethyst.PiecewiseLinear.As.Schmitty.html#709" class="Generalizable">upper</a>  <a id="716" class="Symbol">:</a> <a id="718" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>

<a id="725" class="Keyword">private</a>
  <a id="735" class="Comment">-- |Return the y-value corresponding to x on the line segment ls. If x is out of</a>
  <a id="818" class="Comment">--  bounds, extrapolate the line segment.</a>
  <a id="reflectExtrapLineSegment"></a><a id="862" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="887" class="Symbol">:</a> <a id="889" class="Symbol">(</a><a id="890" href="Amethyst.PiecewiseLinear.As.Schmitty.html#890" class="Bound">ls</a> <a id="893" class="Symbol">:</a> <a id="895" href="Amethyst.PiecewiseLinear.Base.html#717" class="Record">LineSegment</a> <a id="907" href="Amethyst.PiecewiseLinear.As.Schmitty.html#671" class="Generalizable">lower</a> <a id="913" href="Amethyst.PiecewiseLinear.As.Schmitty.html#709" class="Generalizable">upper</a><a id="918" class="Symbol">)</a> <a id="920" class="Symbol">→</a> <a id="922" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="927" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a> <a id="929" class="Symbol">→</a> <a id="931" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="936" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a>
  <a id="940" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="965" href="Amethyst.PiecewiseLinear.As.Schmitty.html#965" class="Bound">ls</a> <a id="968" href="Amethyst.PiecewiseLinear.As.Schmitty.html#968" class="Bound">x</a> <a id="970" class="Symbol">=</a> <a id="972" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="977" href="SMT.Theories.Reals.html#4560" class="InductiveConstructor">add</a> <a id="981" class="Symbol">(</a><a id="982" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="987" href="SMT.Theories.Reals.html#4591" class="InductiveConstructor">mul</a> <a id="991" href="Amethyst.PiecewiseLinear.As.Schmitty.html#968" class="Bound">x</a> <a id="993" class="Symbol">(</a><a id="994" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="1001" href="Amethyst.PiecewiseLinear.Base.html#775" class="Function">slope</a><a id="1006" class="Symbol">))</a> <a id="1009" class="Symbol">(</a><a id="1010" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="1017" href="Amethyst.PiecewiseLinear.Base.html#797" class="Function">intercept</a><a id="1026" class="Symbol">)</a>
    <a id="1032" class="Keyword">where</a>
      <a id="1044" class="Keyword">open</a> <a id="1049" href="Amethyst.PiecewiseLinear.Base.html#717" class="Module">LineSegment</a> <a id="1061" href="Amethyst.PiecewiseLinear.As.Schmitty.html#965" class="Bound">ls</a> <a id="1064" class="Keyword">using</a> <a id="1070" class="Symbol">(</a><a id="1071" href="Amethyst.PiecewiseLinear.Base.html#775" class="Field">slope</a><a id="1076" class="Symbol">;</a> <a id="1078" href="Amethyst.PiecewiseLinear.Base.html#797" class="Field">intercept</a><a id="1087" class="Symbol">)</a>

  <a id="1092" class="Comment">-- |Return the y-value corresponding to x on the line segment ls. If x is out of</a>
  <a id="1175" class="Comment">--  bounds, return the y-value corresponding to the x-value closest to x which is</a>
  <a id="1259" class="Comment">--  in bounds, i.e., either lower or upper.</a>
  <a id="reflectBoundedLineSegment"></a><a id="1305" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1305" class="Function">reflectBoundedLineSegment</a> <a id="1331" class="Symbol">:</a> <a id="1333" class="Symbol">(</a><a id="1334" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1334" class="Bound">ls</a> <a id="1337" class="Symbol">:</a> <a id="1339" href="Amethyst.PiecewiseLinear.Base.html#717" class="Record">LineSegment</a> <a id="1351" href="Amethyst.PiecewiseLinear.As.Schmitty.html#671" class="Generalizable">lower</a> <a id="1357" href="Amethyst.PiecewiseLinear.As.Schmitty.html#709" class="Generalizable">upper</a><a id="1362" class="Symbol">)</a> <a id="1364" class="Symbol">→</a> <a id="1366" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="1371" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a> <a id="1373" class="Symbol">→</a> <a id="1375" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="1380" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a>
  <a id="1384" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1305" class="Function">reflectBoundedLineSegment</a> <a id="1410" class="Symbol">{</a><a id="1411" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1411" class="Bound">lower</a><a id="1416" class="Symbol">}</a> <a id="1418" class="Symbol">{</a><a id="1419" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1419" class="Bound">upper</a><a id="1424" class="Symbol">}</a> <a id="1426" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1426" class="Bound">ls</a> <a id="1429" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1429" class="Bound">x</a>
    <a id="1435" class="Symbol">=</a> <a id="1437" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="1442" href="SMT.Theories.Reals.html#4452" class="InductiveConstructor">ite</a> <a id="1446" class="Symbol">(</a><a id="1447" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="1452" href="SMT.Theories.Reals.html#4653" class="InductiveConstructor">leq</a> <a id="1456" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1429" class="Bound">x</a> <a id="1458" class="Symbol">(</a><a id="1459" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="1466" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1411" class="Bound">lower</a><a id="1471" class="Symbol">))</a> <a id="1474" class="Symbol">(</a><a id="1475" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="1500" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1426" class="Bound">ls</a> <a id="1503" class="Symbol">(</a><a id="1504" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="1511" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1411" class="Bound">lower</a><a id="1516" class="Symbol">))</a>
    <a id="1523" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1525" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="1530" href="SMT.Theories.Reals.html#4452" class="InductiveConstructor">ite</a> <a id="1534" class="Symbol">(</a><a id="1535" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="1540" href="SMT.Theories.Reals.html#4653" class="InductiveConstructor">leq</a> <a id="1544" class="Symbol">(</a><a id="1545" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="1552" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1419" class="Bound">upper</a><a id="1557" class="Symbol">)</a> <a id="1559" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1429" class="Bound">x</a><a id="1560" class="Symbol">)</a> <a id="1562" class="Symbol">(</a><a id="1563" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="1588" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1426" class="Bound">ls</a> <a id="1591" class="Symbol">(</a><a id="1592" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="1599" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1419" class="Bound">upper</a><a id="1604" class="Symbol">))</a>
    <a id="1611" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1613" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="1638" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1426" class="Bound">ls</a> <a id="1641" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1429" class="Bound">x</a>

<a id="1644" class="Comment">-- |Return the y-value corresponding to x on the piecewise-linear function.</a>
<a id="1720" class="Comment">--  If x is out of bounds, extrapolate the head/last line segment.</a>
<a id="reflectExtrap"></a><a id="1787" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1787" class="Function">reflectExtrap</a> <a id="1801" class="Symbol">:</a> <a id="1803" class="Symbol">(</a><a id="1804" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1804" class="Bound">pl</a> <a id="1807" class="Symbol">:</a> <a id="1809" href="Amethyst.PiecewiseLinear.Base.html#885" class="Datatype">PiecewiseLinear</a> <a id="1825" href="Amethyst.PiecewiseLinear.As.Schmitty.html#671" class="Generalizable">lower</a> <a id="1831" href="Amethyst.PiecewiseLinear.As.Schmitty.html#690" class="Generalizable">step</a> <a id="1836" class="Symbol">(</a><a id="1837" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1841" href="Amethyst.PiecewiseLinear.As.Schmitty.html#656" class="Generalizable">pieces</a><a id="1847" class="Symbol">))</a> <a id="1850" class="Symbol">→</a> <a id="1852" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="1857" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a> <a id="1859" class="Symbol">→</a> <a id="1861" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="1866" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a>
<a id="1868" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1787" class="Function">reflectExtrap</a> <a id="1882" class="Symbol">{</a><a id="1883" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1883" class="Bound">lower</a><a id="1888" class="Symbol">}</a> <a id="1890" class="Symbol">{</a><a id="1891" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1891" class="Bound">step</a><a id="1895" class="Symbol">}</a> <a id="1897" class="Symbol">(</a><a id="1898" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1898" class="Bound">ls</a> <a id="1901" href="Amethyst.PiecewiseLinear.Base.html#988" class="InductiveConstructor Operator">∷</a> <a id="1903" href="Amethyst.PiecewiseLinear.Base.html#951" class="InductiveConstructor">[]</a><a id="1905" class="Symbol">)</a>         <a id="1915" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1915" class="Bound">x</a> <a id="1917" class="Symbol">=</a> <a id="1919" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="1944" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1898" class="Bound">ls</a> <a id="1947" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1915" class="Bound">x</a>
<a id="1949" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1787" class="Function">reflectExtrap</a> <a id="1963" class="Symbol">{</a><a id="1964" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1964" class="Bound">lower</a><a id="1969" class="Symbol">}</a> <a id="1971" class="Symbol">{</a><a id="1972" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1972" class="Bound">step</a><a id="1976" class="Symbol">}</a> <a id="1978" class="Symbol">(</a><a id="1979" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1979" class="Bound">ls</a> <a id="1982" href="Amethyst.PiecewiseLinear.Base.html#988" class="InductiveConstructor Operator">∷</a> <a id="1984" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1984" class="Bound">pl</a><a id="1986" class="Symbol">@(_</a> <a id="1990" href="Amethyst.PiecewiseLinear.Base.html#988" class="InductiveConstructor Operator">∷</a> <a id="1992" class="Symbol">_))</a> <a id="1996" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1996" class="Bound">x</a>
  <a id="2000" class="Symbol">=</a> <a id="2002" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="2007" href="SMT.Theories.Reals.html#4452" class="InductiveConstructor">ite</a> <a id="2011" class="Symbol">(</a><a id="2012" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2017" href="SMT.Theories.Reals.html#4653" class="InductiveConstructor">leq</a> <a id="2021" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1996" class="Bound">x</a> <a id="2023" class="Symbol">(</a><a id="2024" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2029" href="SMT.Theories.Reals.html#4560" class="InductiveConstructor">add</a> <a id="2033" class="Symbol">(</a><a id="2034" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="2041" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1964" class="Bound">lower</a><a id="2046" class="Symbol">)</a> <a id="2048" class="Symbol">(</a><a id="2049" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="2056" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1972" class="Bound">step</a><a id="2060" class="Symbol">)))</a> <a id="2064" class="Symbol">(</a><a id="2065" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="2090" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1979" class="Bound">ls</a> <a id="2093" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1996" class="Bound">x</a><a id="2094" class="Symbol">)</a>
  <a id="2098" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2100" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1787" class="Function">reflectExtrap</a> <a id="2114" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1984" class="Bound">pl</a> <a id="2117" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1996" class="Bound">x</a>

<a id="2120" class="Comment">-- |Return the y-value corresponding to x on the piecewise-linear function.</a>
<a id="2196" class="Comment">--  If x is out of bounds, return the y-value corresponding to the x-value</a>
<a id="2271" class="Comment">--  closest to x which is in bounds, i.e., either lower or upper.</a>
<a id="reflectBounded"></a><a id="2337" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2337" class="Function">reflectBounded</a> <a id="2352" class="Symbol">:</a> <a id="2354" class="Symbol">(</a><a id="2355" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2355" class="Bound">pl</a> <a id="2358" class="Symbol">:</a> <a id="2360" href="Amethyst.PiecewiseLinear.Base.html#885" class="Datatype">PiecewiseLinear</a> <a id="2376" href="Amethyst.PiecewiseLinear.As.Schmitty.html#671" class="Generalizable">lower</a> <a id="2382" href="Amethyst.PiecewiseLinear.As.Schmitty.html#690" class="Generalizable">step</a> <a id="2387" class="Symbol">(</a><a id="2388" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2392" href="Amethyst.PiecewiseLinear.As.Schmitty.html#656" class="Generalizable">pieces</a><a id="2398" class="Symbol">))</a> <a id="2401" class="Symbol">→</a> <a id="2403" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="2408" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a> <a id="2410" class="Symbol">→</a> <a id="2412" href="Amethyst.LinearAlgebra.As.Schmitty.html#674" class="Function">Real</a> <a id="2417" href="Amethyst.PiecewiseLinear.As.Schmitty.html#638" class="Generalizable">Γ</a>
<a id="2419" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2337" class="Function">reflectBounded</a> <a id="2434" class="Symbol">{</a><a id="2435" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2435" class="Bound">lower</a><a id="2440" class="Symbol">}</a> <a id="2442" class="Symbol">{</a><a id="2443" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2443" class="Bound">step</a><a id="2447" class="Symbol">}</a> <a id="2449" class="Symbol">{</a><a id="2450" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2450" class="Bound">pieces</a><a id="2456" class="Symbol">}</a> <a id="2458" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2458" class="Bound">pl</a> <a id="2461" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2461" class="Bound">x</a> <a id="2463" class="Symbol">=</a>
  <a id="2467" class="Keyword">let</a> <a id="2471" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2471" class="Bound">upper</a> <a id="2477" class="Symbol">=</a> <a id="2479" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2435" class="Bound">lower</a> <a id="2485" href="Amethyst.PiecewiseLinear.Base.html#1805" class="Function Operator">+[</a> <a id="2488" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2443" class="Bound">step</a> <a id="2493" href="Amethyst.PiecewiseLinear.Base.html#1805" class="Function Operator">*</a> <a id="2495" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2499" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2450" class="Bound">pieces</a> <a id="2506" href="Amethyst.PiecewiseLinear.Base.html#1805" class="Function Operator">]</a>
  <a id="2510" class="Keyword">in</a> <a id="2513" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="2518" href="SMT.Theories.Reals.html#4452" class="InductiveConstructor">ite</a> <a id="2522" class="Symbol">(</a><a id="2523" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2528" href="SMT.Theories.Reals.html#4653" class="InductiveConstructor">leq</a> <a id="2532" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2461" class="Bound">x</a> <a id="2534" class="Symbol">(</a><a id="2535" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="2542" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2435" class="Bound">lower</a><a id="2547" class="Symbol">))</a> <a id="2550" class="Symbol">(</a><a id="2551" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="2576" class="Symbol">(</a><a id="2577" href="Amethyst.PiecewiseLinear.Base.html#1207" class="Function">head</a> <a id="2582" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2458" class="Bound">pl</a><a id="2584" class="Symbol">)</a> <a id="2586" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2461" class="Bound">x</a><a id="2587" class="Symbol">)</a>
   <a id="2592" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2594" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="2599" href="SMT.Theories.Reals.html#4452" class="InductiveConstructor">ite</a> <a id="2603" class="Symbol">(</a><a id="2604" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2609" href="SMT.Theories.Reals.html#4653" class="InductiveConstructor">leq</a> <a id="2613" class="Symbol">(</a><a id="2614" href="Amethyst.LinearAlgebra.As.Schmitty.html#714" class="Function">toReal</a> <a id="2621" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2471" class="Bound">upper</a><a id="2626" class="Symbol">)</a> <a id="2628" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2461" class="Bound">x</a><a id="2629" class="Symbol">)</a> <a id="2631" class="Symbol">(</a><a id="2632" href="Amethyst.PiecewiseLinear.As.Schmitty.html#862" class="Function">reflectExtrapLineSegment</a> <a id="2657" class="Symbol">(</a><a id="2658" href="Amethyst.PiecewiseLinear.Base.html#1970" class="Function">last</a> <a id="2663" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2458" class="Bound">pl</a><a id="2665" class="Symbol">)</a> <a id="2667" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2461" class="Bound">x</a><a id="2668" class="Symbol">)</a>
   <a id="2673" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2675" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1787" class="Function">reflectExtrap</a> <a id="2689" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2458" class="Bound">pl</a> <a id="2692" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2461" class="Bound">x</a>
</pre></body></html>