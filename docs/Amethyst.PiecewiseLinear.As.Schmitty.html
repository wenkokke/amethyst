<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Amethyst.PiecewiseLinear.As.Schmitty</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">--------------------------------------------------------------------------------</a>
<a id="82" class="Comment">-- Amethyst: Neural Network Verification in Agda</a>
<a id="131" class="Comment">--</a>
<a id="134" class="Comment">-- This module contains functions to reflect piecewise-linear functions to</a>
<a id="209" class="Comment">-- Schmitty terms. The various reflections correspond to the various evaluations,</a>
<a id="291" class="Comment">-- see `Amethyst.PiecewiseLinear.As.Float`.</a>
<a id="335" class="Comment">--</a>
<a id="338" class="Comment">-- Exports:</a>
<a id="350" class="Comment">--</a>
<a id="353" class="Comment">--  - reflectExtrap</a>
<a id="373" class="Comment">--  - reflectBounded</a>
<a id="394" class="Comment">--</a>
<a id="397" class="Comment">--------------------------------------------------------------------------------</a>
<a id="478" class="Keyword">module</a> <a id="485" href="Amethyst.PiecewiseLinear.As.Schmitty.html" class="Module">Amethyst.PiecewiseLinear.As.Schmitty</a> <a id="522" class="Keyword">where</a>

<a id="529" class="Keyword">open</a> <a id="534" class="Keyword">import</a> <a id="541" href="Amethyst.PiecewiseLinear.Base.html" class="Module">Amethyst.PiecewiseLinear.Base</a>
<a id="571" class="Keyword">open</a> <a id="576" class="Keyword">import</a> <a id="583" href="Amethyst.LinearAlgebra.As.Schmitty.html" class="Module">Amethyst.LinearAlgebra.As.Schmitty</a>
<a id="618" class="Keyword">open</a> <a id="623" class="Keyword">import</a> <a id="630" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="640" class="Symbol">as</a> <a id="643" class="Module">Bool</a> <a id="648" class="Keyword">using</a> <a id="654" class="Symbol">(</a><a id="655" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="659" class="Symbol">;</a> <a id="661" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="665" class="Symbol">;</a> <a id="667" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="672" class="Symbol">;</a> <a id="674" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a><a id="687" class="Symbol">)</a>
<a id="689" class="Keyword">open</a> <a id="694" class="Keyword">import</a> <a id="701" href="Data.Float.html" class="Module">Data.Float</a> <a id="712" class="Symbol">as</a> <a id="715" class="Module">Float</a> <a id="721" class="Keyword">using</a> <a id="727" class="Symbol">(</a><a id="728" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="733" class="Symbol">;</a> <a id="735" href="Agda.Builtin.Float.html#1336" class="Primitive">_+_</a><a id="738" class="Symbol">;</a> <a id="740" href="Agda.Builtin.Float.html#1442" class="Primitive">_*_</a><a id="743" class="Symbol">;</a> <a id="745" href="Agda.Builtin.Float.html#422" class="Primitive">_≤ᵇ_</a><a id="749" class="Symbol">)</a>
<a id="751" class="Keyword">open</a> <a id="756" class="Keyword">import</a> <a id="763" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="772" class="Symbol">as</a> <a id="775" class="Module">Nat</a> <a id="779" class="Keyword">using</a> <a id="785" class="Symbol">(</a><a id="786" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="787" class="Symbol">;</a> <a id="789" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="792" class="Symbol">;</a> <a id="794" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="798" class="Symbol">)</a>
<a id="800" class="Keyword">open</a> <a id="805" class="Keyword">import</a> <a id="812" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="821" class="Symbol">as</a> <a id="824" class="Module">Vec</a> <a id="828" class="Keyword">using</a> <a id="834" class="Symbol">(</a><a id="835" href="Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="838" class="Symbol">)</a>
<a id="840" class="Keyword">open</a> <a id="845" class="Keyword">import</a> <a id="852" href="Function.html" class="Module">Function</a> <a id="861" class="Keyword">using</a> <a id="867" class="Symbol">(</a><a id="868" href="Function.Base.html#1919" class="Function Operator">_$_</a><a id="871" class="Symbol">)</a>

<a id="874" class="Keyword">private</a>
  <a id="884" class="Keyword">variable</a>
    <a id="897" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a>      <a id="904" class="Symbol">:</a> <a id="906" href="SMT.Script.Base.html#1026" class="Function">Ctxt</a>
    <a id="915" href="Amethyst.PiecewiseLinear.As.Schmitty.html#915" class="Generalizable">pieces</a> <a id="922" class="Symbol">:</a> <a id="924" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="930" href="Amethyst.PiecewiseLinear.As.Schmitty.html#930" class="Generalizable">lower</a>  <a id="937" class="Symbol">:</a> <a id="939" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="949" href="Amethyst.PiecewiseLinear.As.Schmitty.html#949" class="Generalizable">step</a>   <a id="956" class="Symbol">:</a> <a id="958" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="968" href="Amethyst.PiecewiseLinear.As.Schmitty.html#968" class="Generalizable">upper</a>  <a id="975" class="Symbol">:</a> <a id="977" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>

<a id="984" class="Keyword">private</a>
  <a id="994" class="Comment">-- |Return the y-value corresponding to x on the line segment ls. If x is out of</a>
  <a id="1077" class="Comment">--  bounds, extrapolate the line segment.</a>
  <a id="reflectExtrapLineSegment"></a><a id="1121" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="1146" class="Symbol">:</a> <a id="1148" class="Symbol">(</a><a id="1149" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1149" class="Bound">ls</a> <a id="1152" class="Symbol">:</a> <a id="1154" href="Amethyst.PiecewiseLinear.Base.html#2232" class="Record">LineSegment</a> <a id="1166" href="Amethyst.PiecewiseLinear.As.Schmitty.html#930" class="Generalizable">lower</a> <a id="1172" href="Amethyst.PiecewiseLinear.As.Schmitty.html#968" class="Generalizable">upper</a><a id="1177" class="Symbol">)</a> <a id="1179" class="Symbol">→</a> <a id="1181" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="1186" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a> <a id="1188" class="Symbol">→</a> <a id="1190" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="1195" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a>
  <a id="1199" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="1224" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1224" class="Bound">ls</a> <a id="1227" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1227" class="Bound">x</a> <a id="1229" class="Symbol">=</a> <a id="1231" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="1236" href="SMT.Theories.Reals.html#4785" class="InductiveConstructor">add</a> <a id="1240" class="Symbol">(</a><a id="1241" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="1246" href="SMT.Theories.Reals.html#4816" class="InductiveConstructor">mul</a> <a id="1250" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1227" class="Bound">x</a> <a id="1252" class="Symbol">(</a><a id="1253" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="1260" href="Amethyst.PiecewiseLinear.Base.html#2290" class="Function">slope</a><a id="1265" class="Symbol">))</a> <a id="1268" class="Symbol">(</a><a id="1269" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="1276" href="Amethyst.PiecewiseLinear.Base.html#2312" class="Function">intercept</a><a id="1285" class="Symbol">)</a>
    <a id="1291" class="Keyword">where</a>
      <a id="1303" class="Keyword">open</a> <a id="1308" href="Amethyst.PiecewiseLinear.Base.html#2232" class="Module">LineSegment</a> <a id="1320" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1224" class="Bound">ls</a> <a id="1323" class="Keyword">using</a> <a id="1329" class="Symbol">(</a><a id="1330" href="Amethyst.PiecewiseLinear.Base.html#2290" class="Field">slope</a><a id="1335" class="Symbol">;</a> <a id="1337" href="Amethyst.PiecewiseLinear.Base.html#2312" class="Field">intercept</a><a id="1346" class="Symbol">)</a>

  <a id="1351" class="Comment">-- |Return the y-value corresponding to x on the line segment ls. If x is out of</a>
  <a id="1434" class="Comment">--  bounds, return the y-value corresponding to the x-value closest to x which is</a>
  <a id="1518" class="Comment">--  in bounds, i.e., either lower or upper.</a>
  <a id="reflectBoundedLineSegment"></a><a id="1564" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1564" class="Function">reflectBoundedLineSegment</a> <a id="1590" class="Symbol">:</a> <a id="1592" class="Symbol">(</a><a id="1593" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1593" class="Bound">ls</a> <a id="1596" class="Symbol">:</a> <a id="1598" href="Amethyst.PiecewiseLinear.Base.html#2232" class="Record">LineSegment</a> <a id="1610" href="Amethyst.PiecewiseLinear.As.Schmitty.html#930" class="Generalizable">lower</a> <a id="1616" href="Amethyst.PiecewiseLinear.As.Schmitty.html#968" class="Generalizable">upper</a><a id="1621" class="Symbol">)</a> <a id="1623" class="Symbol">→</a> <a id="1625" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="1630" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a> <a id="1632" class="Symbol">→</a> <a id="1634" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="1639" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a>
  <a id="1643" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1564" class="Function">reflectBoundedLineSegment</a> <a id="1669" class="Symbol">{</a><a id="1670" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1670" class="Bound">lower</a><a id="1675" class="Symbol">}</a> <a id="1677" class="Symbol">{</a><a id="1678" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1678" class="Bound">upper</a><a id="1683" class="Symbol">}</a> <a id="1685" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1685" class="Bound">ls</a> <a id="1688" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1688" class="Bound">x</a>
    <a id="1694" class="Symbol">=</a> <a id="1696" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="1701" href="SMT.Theories.Reals.html#4677" class="InductiveConstructor">ite</a> <a id="1705" class="Symbol">(</a><a id="1706" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="1711" href="SMT.Theories.Reals.html#4878" class="InductiveConstructor">leq</a> <a id="1715" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1688" class="Bound">x</a> <a id="1717" class="Symbol">(</a><a id="1718" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="1725" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1670" class="Bound">lower</a><a id="1730" class="Symbol">))</a> <a id="1733" class="Symbol">(</a><a id="1734" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="1759" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1685" class="Bound">ls</a> <a id="1762" class="Symbol">(</a><a id="1763" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="1770" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1670" class="Bound">lower</a><a id="1775" class="Symbol">))</a>
    <a id="1782" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1784" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="1789" href="SMT.Theories.Reals.html#4677" class="InductiveConstructor">ite</a> <a id="1793" class="Symbol">(</a><a id="1794" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="1799" href="SMT.Theories.Reals.html#4878" class="InductiveConstructor">leq</a> <a id="1803" class="Symbol">(</a><a id="1804" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="1811" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1678" class="Bound">upper</a><a id="1816" class="Symbol">)</a> <a id="1818" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1688" class="Bound">x</a><a id="1819" class="Symbol">)</a> <a id="1821" class="Symbol">(</a><a id="1822" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="1847" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1685" class="Bound">ls</a> <a id="1850" class="Symbol">(</a><a id="1851" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="1858" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1678" class="Bound">upper</a><a id="1863" class="Symbol">))</a>
    <a id="1870" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1872" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="1897" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1685" class="Bound">ls</a> <a id="1900" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1688" class="Bound">x</a>

<a id="1903" class="Comment">-- |Return the y-value corresponding to x on the piecewise-linear function.</a>
<a id="1979" class="Comment">--  If x is out of bounds, extrapolate the head/last line segment.</a>
<a id="reflectExtrap"></a><a id="2046" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2046" class="Function">reflectExtrap</a> <a id="2060" class="Symbol">:</a> <a id="2062" class="Symbol">(</a><a id="2063" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2063" class="Bound">pl</a> <a id="2066" class="Symbol">:</a> <a id="2068" href="Amethyst.PiecewiseLinear.Base.html#2400" class="Datatype">PiecewiseLinear</a> <a id="2084" href="Amethyst.PiecewiseLinear.As.Schmitty.html#930" class="Generalizable">lower</a> <a id="2090" href="Amethyst.PiecewiseLinear.As.Schmitty.html#949" class="Generalizable">step</a> <a id="2095" class="Symbol">(</a><a id="2096" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2100" href="Amethyst.PiecewiseLinear.As.Schmitty.html#915" class="Generalizable">pieces</a><a id="2106" class="Symbol">))</a> <a id="2109" class="Symbol">→</a> <a id="2111" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="2116" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a> <a id="2118" class="Symbol">→</a> <a id="2120" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="2125" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a>
<a id="2127" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2046" class="Function">reflectExtrap</a> <a id="2141" class="Symbol">{</a><a id="2142" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2142" class="Bound">lower</a><a id="2147" class="Symbol">}</a> <a id="2149" class="Symbol">{</a><a id="2150" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2150" class="Bound">step</a><a id="2154" class="Symbol">}</a> <a id="2156" class="Symbol">(</a><a id="2157" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2157" class="Bound">ls</a> <a id="2160" href="Amethyst.PiecewiseLinear.Base.html#2503" class="InductiveConstructor Operator">∷</a> <a id="2162" href="Amethyst.PiecewiseLinear.Base.html#2466" class="InductiveConstructor">[]</a><a id="2164" class="Symbol">)</a>         <a id="2174" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2174" class="Bound">x</a> <a id="2176" class="Symbol">=</a> <a id="2178" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="2203" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2157" class="Bound">ls</a> <a id="2206" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2174" class="Bound">x</a>
<a id="2208" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2046" class="Function">reflectExtrap</a> <a id="2222" class="Symbol">{</a><a id="2223" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2223" class="Bound">lower</a><a id="2228" class="Symbol">}</a> <a id="2230" class="Symbol">{</a><a id="2231" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2231" class="Bound">step</a><a id="2235" class="Symbol">}</a> <a id="2237" class="Symbol">(</a><a id="2238" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2238" class="Bound">ls</a> <a id="2241" href="Amethyst.PiecewiseLinear.Base.html#2503" class="InductiveConstructor Operator">∷</a> <a id="2243" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2243" class="Bound">pl</a><a id="2245" class="Symbol">@(_</a> <a id="2249" href="Amethyst.PiecewiseLinear.Base.html#2503" class="InductiveConstructor Operator">∷</a> <a id="2251" class="Symbol">_))</a> <a id="2255" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2255" class="Bound">x</a>
  <a id="2259" class="Symbol">=</a> <a id="2261" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="2266" href="SMT.Theories.Reals.html#4677" class="InductiveConstructor">ite</a> <a id="2270" class="Symbol">(</a><a id="2271" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2276" href="SMT.Theories.Reals.html#4878" class="InductiveConstructor">leq</a> <a id="2280" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2255" class="Bound">x</a> <a id="2282" class="Symbol">(</a><a id="2283" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2288" href="SMT.Theories.Reals.html#4785" class="InductiveConstructor">add</a> <a id="2292" class="Symbol">(</a><a id="2293" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="2300" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2223" class="Bound">lower</a><a id="2305" class="Symbol">)</a> <a id="2307" class="Symbol">(</a><a id="2308" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="2315" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2231" class="Bound">step</a><a id="2319" class="Symbol">)))</a> <a id="2323" class="Symbol">(</a><a id="2324" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="2349" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2238" class="Bound">ls</a> <a id="2352" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2255" class="Bound">x</a><a id="2353" class="Symbol">)</a>
  <a id="2357" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2359" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2046" class="Function">reflectExtrap</a> <a id="2373" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2243" class="Bound">pl</a> <a id="2376" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2255" class="Bound">x</a>

<a id="2379" class="Comment">-- |Return the y-value corresponding to x on the piecewise-linear function.</a>
<a id="2455" class="Comment">--  If x is out of bounds, return the y-value corresponding to the x-value</a>
<a id="2530" class="Comment">--  closest to x which is in bounds, i.e., either lower or upper.</a>
<a id="reflectBounded"></a><a id="2596" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2596" class="Function">reflectBounded</a> <a id="2611" class="Symbol">:</a> <a id="2613" class="Symbol">(</a><a id="2614" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2614" class="Bound">pl</a> <a id="2617" class="Symbol">:</a> <a id="2619" href="Amethyst.PiecewiseLinear.Base.html#2400" class="Datatype">PiecewiseLinear</a> <a id="2635" href="Amethyst.PiecewiseLinear.As.Schmitty.html#930" class="Generalizable">lower</a> <a id="2641" href="Amethyst.PiecewiseLinear.As.Schmitty.html#949" class="Generalizable">step</a> <a id="2646" class="Symbol">(</a><a id="2647" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2651" href="Amethyst.PiecewiseLinear.As.Schmitty.html#915" class="Generalizable">pieces</a><a id="2657" class="Symbol">))</a> <a id="2660" class="Symbol">→</a> <a id="2662" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="2667" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a> <a id="2669" class="Symbol">→</a> <a id="2671" href="Amethyst.LinearAlgebra.As.Schmitty.html#1164" class="Function">Real</a> <a id="2676" href="Amethyst.PiecewiseLinear.As.Schmitty.html#897" class="Generalizable">Γ</a>
<a id="2678" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2596" class="Function">reflectBounded</a> <a id="2693" class="Symbol">{</a><a id="2694" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2694" class="Bound">lower</a><a id="2699" class="Symbol">}</a> <a id="2701" class="Symbol">{</a><a id="2702" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2702" class="Bound">step</a><a id="2706" class="Symbol">}</a> <a id="2708" class="Symbol">{</a><a id="2709" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2709" class="Bound">pieces</a><a id="2715" class="Symbol">}</a> <a id="2717" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2717" class="Bound">pl</a> <a id="2720" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2720" class="Bound">x</a> <a id="2722" class="Symbol">=</a>
  <a id="2726" class="Keyword">let</a> <a id="2730" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2730" class="Bound">upper</a> <a id="2736" class="Symbol">=</a> <a id="2738" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2694" class="Bound">lower</a> <a id="2744" href="Amethyst.PiecewiseLinear.Base.html#3320" class="Function Operator">+[</a> <a id="2747" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2702" class="Bound">step</a> <a id="2752" href="Amethyst.PiecewiseLinear.Base.html#3320" class="Function Operator">*</a> <a id="2754" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2758" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2709" class="Bound">pieces</a> <a id="2765" href="Amethyst.PiecewiseLinear.Base.html#3320" class="Function Operator">]</a>
  <a id="2769" class="Keyword">in</a> <a id="2772" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="2777" href="SMT.Theories.Reals.html#4677" class="InductiveConstructor">ite</a> <a id="2781" class="Symbol">(</a><a id="2782" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2787" href="SMT.Theories.Reals.html#4878" class="InductiveConstructor">leq</a> <a id="2791" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2720" class="Bound">x</a> <a id="2793" class="Symbol">(</a><a id="2794" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="2801" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2694" class="Bound">lower</a><a id="2806" class="Symbol">))</a> <a id="2809" class="Symbol">(</a><a id="2810" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="2835" class="Symbol">(</a><a id="2836" href="Amethyst.PiecewiseLinear.Base.html#2722" class="Function">head</a> <a id="2841" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2717" class="Bound">pl</a><a id="2843" class="Symbol">)</a> <a id="2845" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2720" class="Bound">x</a><a id="2846" class="Symbol">)</a>
   <a id="2851" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2853" href="SMT.Script.Base.html#1976" class="InductiveConstructor">app₃</a> <a id="2858" href="SMT.Theories.Reals.html#4677" class="InductiveConstructor">ite</a> <a id="2862" class="Symbol">(</a><a id="2863" href="SMT.Script.Base.html#1934" class="InductiveConstructor">app₂</a> <a id="2868" href="SMT.Theories.Reals.html#4878" class="InductiveConstructor">leq</a> <a id="2872" class="Symbol">(</a><a id="2873" href="Amethyst.LinearAlgebra.As.Schmitty.html#1204" class="Function">toReal</a> <a id="2880" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2730" class="Bound">upper</a><a id="2885" class="Symbol">)</a> <a id="2887" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2720" class="Bound">x</a><a id="2888" class="Symbol">)</a> <a id="2890" class="Symbol">(</a><a id="2891" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1121" class="Function">reflectExtrapLineSegment</a> <a id="2916" class="Symbol">(</a><a id="2917" href="Amethyst.PiecewiseLinear.Base.html#3485" class="Function">last</a> <a id="2922" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2717" class="Bound">pl</a><a id="2924" class="Symbol">)</a> <a id="2926" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2720" class="Bound">x</a><a id="2927" class="Symbol">)</a>
   <a id="2932" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2934" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2046" class="Function">reflectExtrap</a> <a id="2948" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2717" class="Bound">pl</a> <a id="2951" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2720" class="Bound">x</a>
</pre></body></html>