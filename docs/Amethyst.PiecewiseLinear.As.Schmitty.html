<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Amethyst.PiecewiseLinear.As.Schmitty</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">--------------------------------------------------------------------------------</a>
<a id="82" class="Comment">-- Amethyst: Neural Network Verification in Agda</a>
<a id="131" class="Comment">--</a>
<a id="134" class="Comment">-- This module contains functions to reflect piecewise-linear functions to</a>
<a id="209" class="Comment">-- Schmitty terms. The various reflections correspond to the various evaluations,</a>
<a id="291" class="Comment">-- see `Amethyst.PiecewiseLinear.As.Float`.</a>
<a id="335" class="Comment">--</a>
<a id="338" class="Comment">-- Exports:</a>
<a id="350" class="Comment">--</a>
<a id="353" class="Comment">--  - reflect</a>
<a id="367" class="Comment">--</a>
<a id="370" class="Comment">--------------------------------------------------------------------------------</a>
<a id="451" class="Keyword">module</a> <a id="458" href="Amethyst.PiecewiseLinear.As.Schmitty.html" class="Module">Amethyst.PiecewiseLinear.As.Schmitty</a> <a id="495" class="Keyword">where</a>

<a id="502" class="Keyword">open</a> <a id="507" class="Keyword">import</a> <a id="514" href="Amethyst.PiecewiseLinear.Base.html" class="Module">Amethyst.PiecewiseLinear.Base</a>
<a id="544" class="Keyword">open</a> <a id="549" class="Keyword">import</a> <a id="556" href="Amethyst.LinearAlgebra.As.Schmitty.html" class="Module">Amethyst.LinearAlgebra.As.Schmitty</a> <a id="591" class="Keyword">hiding</a> <a id="598" class="Symbol">(</a><a id="599" href="SMT.Theories.Core.Extensions.html#1020" class="Function">true</a><a id="603" class="Symbol">;</a> <a id="605" href="SMT.Theories.Core.Extensions.html#1086" class="Function">false</a><a id="610" class="Symbol">)</a>
<a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="634" class="Symbol">as</a> <a id="637" class="Module">Bool</a> <a id="642" class="Keyword">using</a> <a id="648" class="Symbol">(</a><a id="649" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="653" class="Symbol">;</a> <a id="655" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="659" class="Symbol">;</a> <a id="661" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="666" class="Symbol">;</a> <a id="668" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a><a id="681" class="Symbol">)</a>
<a id="683" class="Keyword">open</a> <a id="688" class="Keyword">import</a> <a id="695" href="Data.Float.html" class="Module">Data.Float</a> <a id="706" class="Symbol">as</a> <a id="709" class="Module">Float</a> <a id="715" class="Keyword">using</a> <a id="721" class="Symbol">(</a><a id="722" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a><a id="727" class="Symbol">;</a> <a id="729" href="Agda.Builtin.Float.html#1336" class="Primitive">_+_</a><a id="732" class="Symbol">;</a> <a id="734" href="Agda.Builtin.Float.html#1442" class="Primitive">_*_</a><a id="737" class="Symbol">;</a> <a id="739" href="Agda.Builtin.Float.html#422" class="Primitive">_≤ᵇ_</a><a id="743" class="Symbol">)</a>
<a id="745" class="Keyword">open</a> <a id="750" class="Keyword">import</a> <a id="757" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="766" class="Symbol">as</a> <a id="769" class="Module">Nat</a> <a id="773" class="Keyword">using</a> <a id="779" class="Symbol">(</a><a id="780" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="781" class="Symbol">;</a> <a id="783" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="786" class="Symbol">;</a> <a id="788" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="792" class="Symbol">;</a> <a id="794" href="Data.Nat.Base.html#2336" class="Function">NonZero</a><a id="801" class="Symbol">)</a>
<a id="803" class="Keyword">open</a> <a id="808" class="Keyword">import</a> <a id="815" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="824" class="Symbol">as</a> <a id="827" class="Module">Vec</a> <a id="831" class="Keyword">using</a> <a id="837" class="Symbol">(</a><a id="838" href="Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="841" class="Symbol">)</a>
<a id="843" class="Keyword">open</a> <a id="848" class="Keyword">import</a> <a id="855" href="Function.html" class="Module">Function</a> <a id="864" class="Keyword">using</a> <a id="870" class="Symbol">(</a><a id="871" href="Function.Base.html#1919" class="Function Operator">_$_</a><a id="874" class="Symbol">)</a>

<a id="877" class="Keyword">private</a>
  <a id="887" class="Keyword">variable</a>
    <a id="900" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a>      <a id="907" class="Symbol">:</a> <a id="909" href="SMT.Script.Base.html#1088" class="Function">Ctxt</a>
    <a id="918" href="Amethyst.PiecewiseLinear.As.Schmitty.html#918" class="Generalizable">pieces</a> <a id="925" class="Symbol">:</a> <a id="927" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="933" href="Amethyst.PiecewiseLinear.As.Schmitty.html#933" class="Generalizable">lower</a>  <a id="940" class="Symbol">:</a> <a id="942" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="952" href="Amethyst.PiecewiseLinear.As.Schmitty.html#952" class="Generalizable">step</a>   <a id="959" class="Symbol">:</a> <a id="961" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>
    <a id="971" href="Amethyst.PiecewiseLinear.As.Schmitty.html#971" class="Generalizable">upper</a>  <a id="978" class="Symbol">:</a> <a id="980" href="Agda.Builtin.Float.html#354" class="Postulate">Float</a>

<a id="987" class="Keyword">private</a>
  <a id="997" class="Comment">-- |Return the y-value corresponding to x on the line segment ls. If x is out of</a>
  <a id="1080" class="Comment">--  bounds, extrapolate the line segment.</a>
  <a id="reflectLineSegment"></a><a id="1124" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1124" class="Function">reflectLineSegment</a> <a id="1143" class="Symbol">:</a> <a id="1145" class="Symbol">(</a><a id="1146" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1146" class="Bound">ls</a> <a id="1149" class="Symbol">:</a> <a id="1151" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Record">LineSegment</a> <a id="1163" href="Amethyst.PiecewiseLinear.As.Schmitty.html#933" class="Generalizable">lower</a> <a id="1169" href="Amethyst.PiecewiseLinear.As.Schmitty.html#971" class="Generalizable">upper</a><a id="1174" class="Symbol">)</a> <a id="1176" class="Symbol">→</a> <a id="1178" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="1183" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a> <a id="1185" class="Symbol">→</a> <a id="1187" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="1192" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a>
  <a id="1196" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1124" class="Function">reflectLineSegment</a> <a id="1215" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1215" class="Bound">ls</a> <a id="1218" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1218" class="Bound">x</a> <a id="1220" class="Symbol">=</a> <a id="1222" href="SMT.Script.Base.html#2141" class="InductiveConstructor">app₂</a> <a id="1227" href="SMT.Theories.Reals.Base.html#4402" class="InductiveConstructor">add</a> <a id="1231" class="Symbol">(</a><a id="1232" href="SMT.Script.Base.html#2141" class="InductiveConstructor">app₂</a> <a id="1237" href="SMT.Theories.Reals.Base.html#4433" class="InductiveConstructor">mul</a> <a id="1241" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1218" class="Bound">x</a> <a id="1243" class="Symbol">(</a><a id="1244" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="1251" href="Amethyst.PiecewiseLinear.Base.html#2887" class="Function">slope</a><a id="1256" class="Symbol">))</a> <a id="1259" class="Symbol">(</a><a id="1260" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="1267" href="Amethyst.PiecewiseLinear.Base.html#2909" class="Function">intercept</a><a id="1276" class="Symbol">)</a>
    <a id="1282" class="Keyword">where</a> <a id="1288" class="Keyword">open</a> <a id="1293" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Module">LineSegment</a> <a id="1305" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1215" class="Bound">ls</a> <a id="1308" class="Keyword">using</a> <a id="1314" class="Symbol">(</a><a id="1315" href="Amethyst.PiecewiseLinear.Base.html#2887" class="Field">slope</a><a id="1320" class="Symbol">;</a> <a id="1322" href="Amethyst.PiecewiseLinear.Base.html#2909" class="Field">intercept</a><a id="1331" class="Symbol">)</a>

  <a id="1336" class="Comment">-- |Return the y-value corresponding to x on the piecewise-linear function.</a>
  <a id="1414" class="Comment">--  If x is out of bounds, extrapolate the head/last line segment.</a>
  <a id="reflectLineSegments"></a><a id="1483" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1483" class="Function">reflectLineSegments</a> <a id="1503" class="Symbol">:</a> <a id="1505" class="Symbol">.{{</a><a id="1508" href="Data.Nat.Base.html#2336" class="Function">NonZero</a> <a id="1516" href="Amethyst.PiecewiseLinear.As.Schmitty.html#918" class="Generalizable">pieces</a><a id="1522" class="Symbol">}}</a> <a id="1525" class="Symbol">→</a> <a id="1527" class="Symbol">(</a><a id="1528" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1528" class="Bound">pl</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Amethyst.PiecewiseLinear.Base.html#2977" class="Datatype">LineSegments</a> <a id="1546" href="Amethyst.PiecewiseLinear.As.Schmitty.html#933" class="Generalizable">lower</a> <a id="1552" href="Amethyst.PiecewiseLinear.As.Schmitty.html#952" class="Generalizable">step</a> <a id="1557" href="Amethyst.PiecewiseLinear.As.Schmitty.html#918" class="Generalizable">pieces</a><a id="1563" class="Symbol">)</a> <a id="1565" class="Symbol">→</a> <a id="1567" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="1572" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a> <a id="1574" class="Symbol">→</a> <a id="1576" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="1581" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a>
  <a id="1585" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1483" class="Function">reflectLineSegments</a> <a id="1605" class="Symbol">{_}</a> <a id="1609" class="Symbol">{</a><a id="1610" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1610" class="Bound">lower</a><a id="1615" class="Symbol">}</a> <a id="1617" class="Symbol">{</a><a id="1618" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1618" class="Bound">step</a><a id="1622" class="Symbol">}</a> <a id="1624" class="Symbol">(</a><a id="1625" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1625" class="Bound">ls</a> <a id="1628" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="1630" href="Amethyst.PiecewiseLinear.Base.html#3040" class="InductiveConstructor">[]</a><a id="1632" class="Symbol">)</a>         <a id="1642" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1642" class="Bound">x</a> <a id="1644" class="Symbol">=</a> <a id="1646" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1124" class="Function">reflectLineSegment</a> <a id="1665" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1625" class="Bound">ls</a> <a id="1668" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1642" class="Bound">x</a>
  <a id="1672" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1483" class="Function">reflectLineSegments</a> <a id="1692" class="Symbol">{_}</a> <a id="1696" class="Symbol">{</a><a id="1697" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1697" class="Bound">lower</a><a id="1702" class="Symbol">}</a> <a id="1704" class="Symbol">{</a><a id="1705" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1705" class="Bound">step</a><a id="1709" class="Symbol">}</a> <a id="1711" class="Symbol">(</a><a id="1712" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1712" class="Bound">ls</a> <a id="1715" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="1717" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1717" class="Bound">pl</a><a id="1719" class="Symbol">@(_</a> <a id="1723" href="Amethyst.PiecewiseLinear.Base.html#3074" class="InductiveConstructor Operator">∷</a> <a id="1725" class="Symbol">_))</a> <a id="1729" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1729" class="Bound">x</a>
    <a id="1735" class="Symbol">=</a> <a id="1737" href="SMT.Script.Base.html#2183" class="InductiveConstructor">app₃</a> <a id="1742" href="SMT.Theories.Reals.Base.html#4294" class="InductiveConstructor">ite</a> <a id="1746" class="Symbol">(</a><a id="1747" href="SMT.Script.Base.html#2141" class="InductiveConstructor">app₂</a> <a id="1752" href="SMT.Theories.Reals.Base.html#4495" class="InductiveConstructor">leq</a> <a id="1756" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1729" class="Bound">x</a> <a id="1758" class="Symbol">(</a><a id="1759" href="SMT.Script.Base.html#2141" class="InductiveConstructor">app₂</a> <a id="1764" href="SMT.Theories.Reals.Base.html#4402" class="InductiveConstructor">add</a> <a id="1768" class="Symbol">(</a><a id="1769" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="1776" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1697" class="Bound">lower</a><a id="1781" class="Symbol">)</a> <a id="1783" class="Symbol">(</a><a id="1784" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="1791" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1705" class="Bound">step</a><a id="1795" class="Symbol">)))</a> <a id="1799" class="Symbol">(</a><a id="1800" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1124" class="Function">reflectLineSegment</a> <a id="1819" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1712" class="Bound">ls</a> <a id="1822" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1729" class="Bound">x</a><a id="1823" class="Symbol">)</a>
    <a id="1829" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1831" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1483" class="Function">reflectLineSegments</a> <a id="1851" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1717" class="Bound">pl</a> <a id="1854" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1729" class="Bound">x</a>

  <a id="1859" class="Comment">-- |Return the y-value corresponding to an out-of-bounds x value,</a>
  <a id="1927" class="Comment">-- given a strategy, the last line segment, and whether it&#39;s below or above the line segment </a>
  <a id="reflectOutOfBoundsStrat"></a><a id="2023" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2023" class="Function">reflectOutOfBoundsStrat</a> <a id="2047" class="Symbol">:</a> <a id="2049" href="Amethyst.PiecewiseLinear.Base.html#4068" class="Datatype">OutOfBoundsStrategy</a> <a id="2069" class="Symbol">→</a> <a id="2071" href="Amethyst.PiecewiseLinear.Base.html#2829" class="Record">LineSegment</a> <a id="2083" href="Amethyst.PiecewiseLinear.As.Schmitty.html#933" class="Generalizable">lower</a> <a id="2089" href="Amethyst.PiecewiseLinear.As.Schmitty.html#971" class="Generalizable">upper</a> <a id="2095" class="Symbol">→</a> <a id="2097" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a> <a id="2102" class="Symbol">→</a> <a id="2104" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="2109" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a> <a id="2111" class="Symbol">→</a> <a id="2113" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="2118" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a>
  <a id="2122" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2023" class="Function">reflectOutOfBoundsStrat</a> <a id="2146" class="Symbol">{_}</a>     <a id="2154" class="Symbol">{_}</a>     <a id="2162" class="Symbol">(</a><a id="2163" href="Amethyst.PiecewiseLinear.Base.html#4102" class="InductiveConstructor">constant</a> <a id="2172" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2172" class="Bound">c</a><a id="2173" class="Symbol">)</a> <a id="2175" class="Symbol">_</a>  <a id="2178" class="Symbol">_</a>     <a id="2184" class="Symbol">_</a> <a id="2186" class="Symbol">=</a> <a id="2188" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="2195" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2172" class="Bound">c</a>
  <a id="2199" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2023" class="Function">reflectOutOfBoundsStrat</a> <a id="2223" class="Symbol">{_}</a>     <a id="2231" class="Symbol">{_}</a>     <a id="2239" href="Amethyst.PiecewiseLinear.Base.html#4148" class="InductiveConstructor">extrapolate</a>  <a id="2252" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2252" class="Bound">ls</a> <a id="2255" class="Symbol">_</a>     <a id="2261" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2261" class="Bound">x</a> <a id="2263" class="Symbol">=</a> <a id="2265" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1124" class="Function">reflectLineSegment</a> <a id="2284" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2252" class="Bound">ls</a> <a id="2287" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2261" class="Bound">x</a>
  <a id="2291" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2023" class="Function">reflectOutOfBoundsStrat</a> <a id="2315" class="Symbol">{</a><a id="2316" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2316" class="Bound">lower</a><a id="2321" class="Symbol">}</a> <a id="2323" class="Symbol">{</a><a id="2324" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2324" class="Bound">upper</a><a id="2329" class="Symbol">}</a> <a id="2331" href="Amethyst.PiecewiseLinear.Base.html#4186" class="InductiveConstructor">nearestValue</a> <a id="2344" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2344" class="Bound">ls</a> <a id="2347" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2347" class="Bound">below</a> <a id="2353" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2353" class="Bound">x</a> <a id="2355" class="Symbol">=</a> <a id="2357" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1124" class="Function">reflectLineSegment</a> <a id="2376" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2344" class="Bound">ls</a> <a id="2379" class="Symbol">(</a><a id="2380" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="2387" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2400" class="Function">v</a><a id="2388" class="Symbol">)</a>
    <a id="2394" class="Keyword">where</a> <a id="2400" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2400" class="Function">v</a> <a id="2402" class="Symbol">=</a> <a id="2404" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="2407" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2347" class="Bound">below</a> <a id="2413" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="2418" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2316" class="Bound">lower</a> <a id="2424" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="2429" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2324" class="Bound">upper</a>

<a id="2436" class="Comment">-- |Return the y-value corresponding to x on the piecewise-linear function.</a>
<a id="reflect"></a><a id="2512" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2512" class="Function">reflect</a> <a id="2520" class="Symbol">:</a> <a id="2522" href="Amethyst.PiecewiseLinear.Base.html#4262" class="Record">PiecewiseLinearFn</a> <a id="2540" class="Symbol">→</a> <a id="2542" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="2547" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a> <a id="2549" class="Symbol">→</a> <a id="2551" href="Amethyst.LinearAlgebra.As.Schmitty.html#1169" class="Function">Real</a> <a id="2556" href="Amethyst.PiecewiseLinear.As.Schmitty.html#900" class="Generalizable">Γ</a>
<a id="2558" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2512" class="Function">reflect</a> <a id="2566" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2566" class="Bound">f</a> <a id="2568" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2568" class="Bound">x</a> <a id="2570" class="Symbol">=</a> <a id="2572" class="Keyword">let</a> <a id="2576" class="Keyword">module</a> <a id="F"></a><a id="2583" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2583" class="Module">F</a> <a id="2585" class="Symbol">=</a> <a id="2587" href="Amethyst.PiecewiseLinear.Base.html#4262" class="Module">PiecewiseLinearFn</a> <a id="2605" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2566" class="Bound">f</a> <a id="2607" class="Keyword">in</a>
    <a id="2614" href="SMT.Script.Base.html#2183" class="InductiveConstructor">app₃</a> <a id="2619" href="SMT.Theories.Reals.Base.html#4294" class="InductiveConstructor">ite</a> <a id="2623" class="Symbol">(</a><a id="2624" href="SMT.Script.Base.html#2141" class="InductiveConstructor">app₂</a> <a id="2629" href="SMT.Theories.Reals.Base.html#4495" class="InductiveConstructor">leq</a> <a id="2633" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2568" class="Bound">x</a> <a id="2635" class="Symbol">(</a><a id="2636" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="2643" href="Amethyst.PiecewiseLinear.Base.html#4345" class="Function">F.lower</a><a id="2650" class="Symbol">))</a> <a id="2653" class="Symbol">(</a><a id="2654" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2023" class="Function">reflectOutOfBoundsStrat</a> <a id="2678" href="Amethyst.PiecewiseLinear.Base.html#4304" class="Function">F.lowerOOBStrat</a> <a id="2694" class="Symbol">(</a><a id="2695" href="Amethyst.PiecewiseLinear.Base.html#4732" class="Function">first</a> <a id="2701" href="Amethyst.PiecewiseLinear.Base.html#4427" class="Function">F.lineSegments</a><a id="2715" class="Symbol">)</a> <a id="2717" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a> <a id="2722" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2568" class="Bound">x</a><a id="2723" class="Symbol">)</a>
  <a id="2727" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2729" href="SMT.Script.Base.html#2183" class="InductiveConstructor">app₃</a> <a id="2734" href="SMT.Theories.Reals.Base.html#4294" class="InductiveConstructor">ite</a> <a id="2738" class="Symbol">(</a><a id="2739" href="SMT.Script.Base.html#2141" class="InductiveConstructor">app₂</a> <a id="2744" href="SMT.Theories.Reals.Base.html#4495" class="InductiveConstructor">leq</a> <a id="2748" class="Symbol">(</a><a id="2749" href="Amethyst.LinearAlgebra.As.Schmitty.html#1209" class="Function">toReal</a> <a id="2756" href="Amethyst.PiecewiseLinear.Base.html#4519" class="Function">F.upper</a><a id="2763" class="Symbol">)</a> <a id="2765" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2568" class="Bound">x</a><a id="2766" class="Symbol">)</a> <a id="2768" class="Symbol">(</a><a id="2769" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2023" class="Function">reflectOutOfBoundsStrat</a> <a id="2793" href="Amethyst.PiecewiseLinear.Base.html#4478" class="Function">F.upperOOBStrat</a> <a id="2809" class="Symbol">(</a><a id="2810" href="Amethyst.PiecewiseLinear.Base.html#4732" class="Function">first</a> <a id="2816" href="Amethyst.PiecewiseLinear.Base.html#4427" class="Function">F.lineSegments</a><a id="2830" class="Symbol">)</a> <a id="2832" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a> <a id="2838" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2568" class="Bound">x</a><a id="2839" class="Symbol">)</a>
  <a id="2843" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2845" href="Amethyst.PiecewiseLinear.As.Schmitty.html#1483" class="Function">reflectLineSegments</a> <a id="2865" href="Amethyst.PiecewiseLinear.Base.html#4427" class="Function">F.lineSegments</a> <a id="2880" href="Amethyst.PiecewiseLinear.As.Schmitty.html#2568" class="Bound">x</a>
</pre></body></html>